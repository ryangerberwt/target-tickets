
<script>
    function displayPopup(storedData) {
        //return true;

        var vehicle = [
            "fiesta",
            "ecosport",
            "puma"
        ];

        var func_data = [];
        func_data.carName = storedData.carName.toLowerCase().replace('ford', '').trim();
        func_data.subName = storedData.subName.toLowerCase();
        console.dir(func_data);

        return vehicle.includes("nuova " + func_data.carName) ||
            vehicle.includes("nuova " + func_data.carName + " " + func_data.subName) ||
            vehicle.includes(func_data.carName) ||
            vehicle.includes(func_data.carName + " " + func_data.subName);
    }
</script>
<script>
    let showMe = false;
    var $ = jQuery;
    let maxRuns = 0;
    var ENV_1323
    var targetErrors = targetErrors || [];
    
    try {
        console.log('OT-1323 | Small Cars | Challenger');

        var enableLogs = false;
        var _log = console.log;
            console.log = function(logMsg){
                if(enableLogs){
         
                    _log.apply(console,arguments);
                }
            }
            //Added because we sometimes use the console.dir function to display vars
            var _dir = console.dir;
            console.dir = function(dirMsg){
                if(enableLogs){
                    _dir.apply(console,arguments);
                }
            }


        // Vehicle Info
        var storedData_1323 = {
            id: "${profile.id}",
            market: "${profile.market}",
            ticket: "${profile.ticket}",
            carName: "${profile.carName}",
            date: "${profile.date}",
            emissions: "${profile.emissions}" == "" ? "" : JSON.parse("${profile.emissions}".replace(/'/g, '"')),
            img: "${profile.img}",
            retailPrice: "${profile.retailPrice}",
            retailTitle: "${profile.retailTitle}",
            offerPrice: "${profile.offerPrice}",
            offerTitle: "${profile.offerTitle}",
            subName: "${profile.subName}",
            vehicleType: "${profile.vehicleType}",
            contextualiseLink: "${profile.contextualiseLink}",
            vehicleCode: "${profile.vehicleCode}"
        }
        function showPopup() {

            let full_name_arr = storedData_1323.carName.split(' ');
            let keyword = full_name_arr[full_name_arr.length - 1].toLowerCase();
            return window.location.href.includes(keyword);

        }

        function checkCarName(){

        }

        function isNull(obj) {
            return obj == undefined || obj == null || obj == "";
        }

        
    function missingTitleWorkAround() {
        console.log('missingTitleWorkAround');
        if (storedData_1323.offerTitle == '') {
            storedData_1323.offerTitle = 'Prezzo in promozione';
        }
        if (storedData_1323.retailTitle == '') {
            storedData_1323.retailTitle = 'Prezzo di listino';
        }

    }

        // Popup Data
        var popupData_1323 = {
            popup_last_closed: Number("${profile.it.popup_last_closed}"),
            popup_display_count: Number("${profile.it.popup_display_count}")
        };
        console.log("stored data: ", storedData_1323);

        // Just in case data DEom a different Market gets through
        // Also checks if a vehicleCode is available, if it doesn't it won't display.
        var display_1323 = "IT" == storedData_1323.market && "OT-1323" == storedData_1323.ticket && !storedData_1323.contextualiseLink.toLowerCase().includes('undefined') && displayPopup(storedData_1323);

        if (display_1323) {

            console.log('getVehicleCode');
            modelsJson = $.getJSON("https://www.ford.it/content/guxeu/it/it_it/configuration/applications-and-services/ngc-configuration-bev.model.json", function (data) {
                console.dir(data);
                $.each(data.nameplateConfig.labels, function (key, val) {
                    if (storedData_1323.id.includes(val.key) && val.formsContext !== null) {
                        console.log('found v code');
                        console.dir(val);
                        storedData_1323.vehicleCode =  val.formsContext;
                        storedData_1323.contextualiseLink = "https://www.ford.it/guida-allacquisto/ricerca/richiedi-test-drive-bpa" + storedData_1323.vehicleCode;
             
                    }
                });

            });



            $(document).ready(function () {

                function overrideLog(error) {
                    if (/targetDebug=1323/i.test(window.location.href)) {
                        console.log(error);
                    }

                    targetErrors.push({ ticket: "1323", error });
                }
                /**
                *
                *	DOM builder
                *	(requires jQuery)
                *
                * #def name DOMBuilder
                *
                *	SYNTAX:
                *	jQueryobject DOMbuilder(srcObject);
                *
                *	srcObject = DOMobject || [array of DOMobject] || jQueryObject || [array of jQueryObject] || function (returning srcObject);
                *
                *	DOMobject = {
                *		type: 'div',
                *		id: 'elm-id' || null,
                    render: boolean, // You can decide if element will be rendered
                *		className: 'elm-class' || 'elm-class-1 elm-class-2' || null,
                *		data: { key: key, value: value } || null,
                *		text: 'Text content' || null,
                *		html: 'HTML content' || null,		// if html provided, text is ignored
                *		child: srcObject || null
                *		handlers: { eventID: function, ... } || null,
                *		callback: function($element) || null
                *		} || [ array of DOMobj ]
                *
                */
                function DOMBuilder(obj) {
                    if (!obj) return;
                    if ($.isArray(obj)) {
                        var i, arr = [];
                        for (i = 0; i < obj.length; i++) {
                            (obj[i] instanceof $) ? arr.push(obj[i]) : arr.push(DOMBuilder(obj[i]));
                        }
                        return arr;
                    } else if (obj instanceof $) return obj;
                    else if ($.isFunction(obj)) return DOMBuilder(obj());
                    else {
                        if (!obj.type) return obj.html || obj.text || undefined;
                        if (obj.hasOwnProperty("render") && !obj.render)
                            return undefined;
                        var $e = $('<' + obj.type + '>');
                        if (obj.id) $e.prop('id', obj.id);
                        if (obj.className) $e.addClass(obj.className);
                        if ($.isPlainObject(obj.data) && obj.data.key) $e.data(obj.data.key, obj.data.value);
                        obj.html ? $e.html(obj.html) : $e.text(obj.text || '');
                        if (obj.child) $e.append(DOMBuilder(obj.child));
                        if ($.isPlainObject(obj.handlers)) {
                            for (var evName in obj.handlers) $e.on(evName, obj.handlers[evName]);
                        }
                        if ($.isPlainObject(obj.props)) {
                            for (var propName in obj.props) $e.prop(propName, obj.props[propName]);
                        }
                        if ($.isFunction(obj.callback)) obj.callback($e);
                        return $e;
                    }
                }

                /**
                * JS VARIANT "Challenger" - Create testdrive popin or similar approach to generate additional testdrive leads
                */

                var Constructions = {};
                ENV_1323 = {
                    elements: {},
                    data: {}
                };

                // Configurations
                /* Market configuration */

                $(document).ready(function (environment) {
                    environment.MarketConfiguration = {
                        // Define overlay URL
                        overlay: "/overlay/content/overlays/target/tdr",
                        // Define delay in ms before opening overlay
                        delayBeforeOpenOverlay: 15000,

                        // Panel with informations like CO2
                        carDataSelector: "#global-ux .summary-wrapper .vehicle-info-view .vehicle-data .vehicle-data-row",
                        // Selectors to disclaimers in summary page
                        disclaimersSelector: "#global-ux .disclosure-text > ul.disclosure-list",
                        // Selector to offer price (if exists)
                        offerPriceSelector: "#global-ux .vehicle-view-container .vehicle-view-content.left-content .vehicle-view-price .price-promotional-bnp",
                        // Selector to retail price (if exists)
                        retailPriceSelector: "#global-ux .vehicle-view-container .vehicle-view-content.left-content .vehicle-view-price .price-retail-with-otr",

                        // Determine which data will be grabed from summary page
                        summaryPageDataDestinations: [{
                            // Image of car
                            query: "#build-price-configurator > div.app-view > div > div:nth-child(5) > section > div.vehicle-view-container > div.vehicle-view-content.right-content > div > img",
                            prop: "src",
                            key: "img"
                        }, {
                            // Find a dealer link
                            query: "a[data-contextual-link=\"dealer-locator\"]",
                            prop: "href",
                            key: "findDealer"
                        }, {
                            // Car nameplate name
                            query: "#build-price-configurator > div.app-view > div > div:nth-child(5) > section > div.vehicle-view-container > div.vehicle-view-content.left-content > h3 > strong",
                            text: true,
                            key: "carName"
                        }]
                    };
                }(ENV_1323));

                var MBOXName = "DE_CH_BP_C_Popin";
                var MBOXFallbackTimeout = 300;

                /* Define texts - easily move across markets */



                function returnSupThree() {

                    return "<sup class='supThreeClick'><a style='text-decoration: unset'>3</a></sup>";
                }

                $(document).ready(function (environment) {

                    missingTitleWorkAround();

                    var translations = {
                        heading: " Mettiti alla guida della tua prossima <nameplate> ?",
                        pricePrefix: "€",
                        priceSuffix: "",
                        retailpricePrefix: "",
                        retailpriceSuffix: "",
                        dutyFree: "",
                        priceValidText: "",
                        mainPriceLabel: "",
                        mainPriceLabelNoOfferPrice: "",
                        retailPriceLabel: "",
                        priceTooltipHeading: "",
                        bookTDRButton: "Richiedi un Test Drive",
                        buttonURL: 'https://www.ford.it/guida-allacquisto/ricerca/richiedi-test-drive-bpa',
                        retailDisclaimer: "",
                        retailKey: "",
                        retailLabel: "",
                        offerDisclaimer: "",
                        offerKey: "",
                        offerLabel: "",
                    };


                    environment.Localisation = {
                        formatDate: formatDate,
                        formatMoney: function (amount) {
                            return Number(Number(amount).toFixed(0)).toLocaleString().replace(/\,/gm, "'")
                        },
                        getTranslation: getTranslation,
                        updateTranslations: updateTranslations,
                        requiredLabelsExist: requiredLabelsExist
                    };


                    function requiredLabelsExist() {
                        if (!isNull(storedData_1323.offerPrice))
                            if (isNull(getTranslation("offerLabel")))
                                return false;

                        if (!isNull(storedData_1323.retailPrice))
                            if (isNull(getTranslation("retailLabel")))
                                return false;

                        return true;
                    }

                    function getTranslation(key, replacements) {
                        var tr = translations[key];
                        if (!tr)
                            return;
                        if (replacements) {
                            $(Object.keys(replacements)).each(function (i, replace) {
                                tr = tr.replace("<" + replace + ">", replacements[replace]);
                            });
                        }

                        overrideLog(key + ": " + tr);
                        return tr;
                    }

                    function updateTranslations(key, replacements) {
                        try {
                            if (replacements) {
                                translations[key] = replacements;
                            }
                        } catch (e) {
                            // assume key doesn't exist.
                            overrideLog(e);
                        }

                    }

                    function formatDate(date) {
                        return date.getDate() + "/" + (date.getMonth() + 1) + "/" + date.getFullYear();
                    }
                }(ENV_1323));

                var StorageHandler = {};
                StorageHandler.cookie = "opt-gux-de-ch"; // opt-gux-MARKET ~ for countries with multiple locales, name it MARKET_LANG ~ Always lower case.
                StorageHandler.getData = function () {
                    var current = JSON.parse(localStorage.getItem(StorageHandler.cookie));
                    if (current == null)
                        return [];
                    else
                        return current;
                };
                StorageHandler.saveData = function (key, data) {
                    var current = StorageHandler.getData();

                    var exists = StorageHandler.getSpecificData(key);

                    if (exists.length > 0) {
                        for (var i = 0; i < current.length; i++) {
                            if (current[i].key == key) {
                                current[i].data = data;
                            }
                        }
                    } else {
                        current.push({ key, data });
                    }
                    localStorage.setItem(StorageHandler.cookie, JSON.stringify(current));
                };
                StorageHandler.getSpecificData = function (key) {
                    var current = StorageHandler.getData();
                    return current.filter(function (each) {
                        return each.key == key;
                    });
                };


                // Elements builder
                function loadInfo() {
                    ENV_1323.Localisation.updateTranslations("offerLabel", storedData_1323.offerTitle);
                    ENV_1323.Localisation.updateTranslations("retailLabel", storedData_1323.retailTitle.toLowerCase());
                    var disclaimerObj = JSON.parse(localStorage.getItem('3.0_disclaimers'));

                    if(disclaimerObj !== undefined && disclaimerObj !== null && disclaimerObj!== "" && disclaimerObj.length > 1){
                        ENV_1323.Localisation.updateTranslations("retailDisclaimer", disclaimerObj[1].disclaimer_content);
                        ENV_1323.Localisation.updateTranslations("retailKey", disclaimerObj[1].suffix_key);
                        ENV_1323.Localisation.updateTranslations("offerDisclaimer", disclaimerObj[0].disclaimer_content);
                        ENV_1323.Localisation.updateTranslations("offerKey", disclaimerObj[0].suffix_key);
                }

                else if (disclaimerObj !== undefined && disclaimerObj !== null && disclaimerObj!== "" && disclaimerObj.length === 1){
                    if(storedData_1323.retailPrice !== undefined && storedData_1323.retailPrice !== ""){
                        ENV_1323.Localisation.updateTranslations("retailDisclaimer", disclaimerObj[0].disclaimer_content);
                        ENV_1323.Localisation.updateTranslations("retailKey", disclaimerObj[0].suffix_key);
                    }
                    else{
                        ENV_1323.Localisation.updateTranslations("offerDisclaimer", disclaimerObj[0].disclaimer_content);
                        ENV_1323.Localisation.updateTranslations("offerKey", disclaimerObj[0].suffix_key);
                    }
                }
            }
                
                loadInfo();


                /* Generate tooltip */
                $(document).ready(function () {

                    var tooltipInstance;
                    var overlay;

                    function docGlobUXOnClick(event) {
                        if (event.target.id === "optprg-tdr-pop-up-price-tooltip" || $(event.target).parents("#optprg-tdr-pop-up-price-tooltip").length)
                            return;
                        event.preventDefault();
                        closeTooltip();
                    }
                    function onResizeOrScrollEvent() {
                        closeTooltip();
                    }
                    function closeTooltip(event) {
                        if (event)
                            event.preventDefault();
                        if (!tooltipInstance)
                            return;
                        overlay.unbind("mousedown", docGlobUXOnClick);
                        overlay.unbind("scroll", onResizeOrScrollEvent);
                        $(window).unbind("resize", onResizeOrScrollEvent);
                        tooltipInstance.remove();
                        tooltipInstance = undefined;
                    }
                    function tooltip(options, close) {
                        return DOMBuilder({
                            type: "div",
                            className: "gux-tooltip-overlay",
                            id: "optprg-tdr-pop-up-price-tooltip",
                            props: {
                                tabindex: "0"
                            },
                            callback: function (element) {
                                element.attr("style", "position: absolute; top: " + options.top + "px; left: " + options.left + "px;right: auto; bottom: " + (options.bottom == undefined ? "auto" : options.bottom + "px") + "; z-index: 10001;");
                            },
                            child: [{
                                type: "h5",
                                className: "gux-tooltip-overlay-title",
                                text: options.title
                            }, {
                                type: "span",
                                className: "gux-tooltip-overlay-text",
                                child: [{
                                    type: "span",
                                    render: options.number ? true : false,
                                    text: options.number
                                }, {
                                    type: "p",
                                    html: options.text
                                }]
                            }, {
                                type: "a",
                                className: "close-icon",
                                handlers: {
                                    click: close
                                },
                                props: {
                                    tabindex: "0"
                                }
                            }]
                        });
                    }
                    Constructions.openTooltip = function (options) {
                        closeTooltip();

                        tooltipInstance = tooltip(options, closeTooltip);
                        $("#global-ux").append(tooltipInstance);
                        if (!overlay)
                            overlay = options.overlay.parent();
                        overlay.on("mousedown", docGlobUXOnClick);
                        overlay.on("scroll", onResizeOrScrollEvent);
                        $(window).on("resize", onResizeOrScrollEvent);
                    };
                }());

                /* Component for show easily price - !this file has connection to tooltip definition */

                Constructions.getPrice = function (options) {
                    return DOMBuilder({
                        type: "span",
                        child: [{
                            type: "span",
                            className: "vehicle-attribute-group price-finalPrice-grossRetailWithOTRAndIncentives",
                            child: [{
                                type: "p",
                                className: "optprg-carname",
                                text: options.carName,
                                child: [{
                                    type: "span",
                                    className: "optprg-subname",
                                    //text: options.subName
                                    html: options.subName
                                }]
                            },
                            {
                                type: "p",
                                className: "optprg-main-price-label",
                                text: options.recPrice,
                                id: "id-optprg-main-price-label"
                            }, {
                                type: "span",
                                className: "optprg-vehicle-attribute-prefix",
                                text: ENV_1323.Localisation.getTranslation(options.pricePrefixName)
                            }, {
                                type: "span",
                                className: "value optprg-main-price-value",
                                text: options.price
                            }, {
                                type: "span",
                                className: "duty-free",
                                text: options.dutyPrice
                            }, {
                                type: "span",
                                className: "optprg-vehicle-attribute-suffix",
                                text: ENV_1323.Localisation.getTranslation(options.priceSuffixName)
                            }
                            ]
                        }, {
                            type: "sup",
                            className: "optprg-sup",
                            render: options.text ? true : false,
                            props: {
                                href: "#"
                            },
                            child: [{
                                type: "a",
                                className: "optprg-a",
                                text: options.number,
                                handlers: {
                                    click: function (e) {
                                        e.preventDefault();
                                        var position = $(this).offset();
                                        var size = {
                                            w: $(this).width(),
                                            h: $(this).height()
                                        };
                                        Constructions.openTooltip({
                                            top: position.top + size.h,
                                            left: position.left + size.w,
                                            title: options.heading,
                                            text: options.text,
                                            number: options.number,
                                            overlay: options.overlay
                                        });
                                    }
                                }
                            }]
                        }]
                    });
                };


                // Handlers
                /* Handle close events */

                function initializeCloseHandlers(overlay) {
                    function destroy() {
                        $(document).unbind("keydown", onKeyPress);
                        destroyOverlay();
                    }
                    function destroyOverlay() {
                        var content = $('.optprg-tdr-pop-up-1323-content'); // Replace 1041 to match the ticket you're on.
                        if (content.length > 0) {
                            var contentParent = content[0].parentElement;
                            if (!isNull(contentParent) && contentParent.classList.value.includes('overlay-container')) {
                                contentParent.remove();
                            }
                        }
                    }
                    var handlers = {
                        dontShowAgainClose: function (wayOfDestroy, callback, mbox) {
                            adobe.target.trackEvent({
                                mbox: mbox,
                                params: {
                                    release: wayOfDestroy,
                                    popup: wayOfDestroy
                                },
                                success: function () {
                                    if (callback)
                                        callback();
                                },
                                error: function () {
                                    if (callback)
                                        callback();
                                }
                            });
                            if (callback)
                                setTimeout(function () {
                                    callback();
                                }, MBOXFallbackTimeout);
                            destroy();
                        },
                        showAgainClose: function (wayOfDestroy, mbox) {
                            adobe.target.trackEvent({
                                mbox: mbox,
                                params: {
                                    popup: wayOfDestroy
                                }
                            });
                            destroy();
                        }
                    };
                    function onKeyPress(e) {
                        if (e.keyCode == 27) {
                            handlers.dontShowAgainClose("close_escape_keyboard", Popup.setLastClosed(), "DE_CH_1323_close_cta_ctr");
                        }
                    }
                    $(document).on("keydown", onKeyPress);
                    overlay.find("span.overlay-close").on("click", function (e) {
                        handlers.dontShowAgainClose("clicked_x", Popup.setLastClosed(), "DE_CH_1323_close_cta_ctr");
                    });
                    overlay.parent(".overlay-container").on("click", function (e) {
                        if ($(e.target).hasClass("overlay-container"))
                            handlers.showAgainClose("clicked_outside_overlay", Popup.setLastClosed(), "DE_CH_1323_close_cta_ctr");
                    });
                    return handlers;
                }

                function updatepopupData_1323(popup_last_closed, popup_display_count) {
                    adobe.target.getOffer({
                        'mbox': 'global-mbox',
                        'params': {
                            'profile.de_ch.popup_last_closed': popup_last_closed,
                            'profile.de_ch.popup_display_count': popup_display_count
                        },
                        'success': function (offer) {
                            adobe.target.applyOffer({
                                'mbox': 'global-mbox',
                                'offer': offer
                            });
                        },
                        'error': function (status, error) {
                            console.log('Error', status, error);
                        }
                    });
                }

                var Popup = {};
                Popup.isPopupOpen = false;
                Popup.showPopupAfter = 900; // IN SECONDS - 900 SECONDS WHICH IS 15 MINUTES
                Popup.openThreshold = 2; // LIMIT THE AMOUNT OF TIMES THE POPUP OPENS
                Popup.currentTimeStamp = Math.floor(Date.now() / 1000);
                Popup.setLastClosed = function () {
                    Popup.setKeyValue("popup_last_closed", Math.floor(Date.now() / 1000));
                };
                Popup.determineIfPopupShows = function () {

                    if (!ENV_1323.Localisation.requiredLabelsExist()) {
                        overrideLog("Price labels, not populated");
                        return false;
                    }

                    var popupCookie = popupData_1323;
                    var timeBool = false;
                    var limitBool = false;
                    showMe = false;
                    // --------------------------------------------------------
                    // DETERMINE IF 15 DAYS HAS PASSED SINCE LAST POPUP CLOSED
                    // --------------------------------------------------------
                    var lastClosed_minutes = Math.floor(popupCookie.popup_last_closed / 60);
                    var current_minutes = Math.floor(Popup.currentTimeStamp / 60);
                    var minuteDifference = current_minutes - lastClosed_minutes;

                    if (minuteDifference >= 21600) {
                        popupData_1323.popup_last_closed = 0;
                        popupData_1323.popup_display_count = 1;
                        updatepopupData_1323(popupData_1323.popup_last_closed, popupData_1323.popup_display_count);
                        showMe = true;
                        console.log('15 days');
                        return true; // In order for popup to appear
                    }
                    // ---------------------------------------------
                    var lastClosed_minutes = Math.floor(popupCookie.popup_last_closed / 60);
                    var current_minutes = Math.floor(Popup.currentTimeStamp / 60);
                    var minuteDifference = current_minutes - lastClosed_minutes;

                    if (minuteDifference >= 21600) {
                        popupData_1323.popup_last_closed = 0;
                        popupData_1323.popup_display_count = 1;
                        updatepopupData_1323(popupData_1323.popup_last_closed, popupData_1323.popup_display_count);
                        showMe = true;
                        console.log('minuteDifference');
                        return true; // In order for popup to appear
                    }

                    // ---------------------------------------------
                    // DETERMINE IF 15 MINUTE TIME LIMIT HAS EXPIRED
                    // ---------------------------------------------
                    var timeDifference = Popup.currentTimeStamp - popupCookie.popup_last_closed;

                    if (timeDifference > Popup.showPopupAfter) {
                        timeBool = true;
                        showMe = true;
                    }
                    else {
                        showMe = false;
                        overrideLog("SHOW AFTER FAILED");
                        overrideLog("TIME DIFFERENCE: " + timeDifference + "/" + Popup.showPopupAfter);
                    }

                    // ---------------------------------------------
                    // LIMIT OPEN THRESHOLD
                    // ---------------------------------------------
                    if (popupCookie.popup_display_count <= Popup.openThreshold && timeBool === true) {

                        showMe = true;
                        console.log('limit threshold');
                        if (popupCookie.popup_last_closed != null) {
                            // INCREASE OPEN COUNTER BY 1
                            Popup.setKeyValue("popup_display_count", ++popupCookie.popup_display_count);
                            Popup.setLastClosed();
                        }

                        limitBool = true;
                    }
                    overrideLog("TIMEBOOL : " + timeBool);
                    overrideLog("LIMITBOOL: " + limitBool);

                    if (/targetDebug=1323/i.test(window.location.href)) {
                        showMe = true;
                    }
                    //return true;
                    return (timeBool && limitBool) || /targetDebug=1323/i.test(window.location.href);
                };
                Popup.setKeyValue = function (key, value) {

                    popupData_1323[key] = value;

                    updatepopupData_1323(popupData_1323.popup_last_closed, popupData_1323.popup_display_count)
                };

                /* Open TDR Overlay */
                var OverlayHelpers = {};

                $(document).ready(function () {

                    var isAlreadyOpenCalled = false;

                    OverlayHelpers.openOverlay = function (overlay, onOverlayOpen) {
                        if (isAlreadyOpenCalled)
                            return false;

                        isAlreadyOpenCalled = true;
                        var element = $("<a href=\"" + overlay + "\" style=\"display: none;\" class='test-me'></a>");
                        $("body").append(element);

                        function waitForOverlayOpen(overlay) {
                            if (!overlay.$overlayContent)
                                return setTimeout(function () {
                                    waitForOverlayOpen(overlay);
                                }, 50);
                            onOverlayOpen(overlay);
                        }


                        /*require(['overlay/component.overlay'],*/

                        element.on('click', function (e) {
                            e.preventDefault();
                        });

                        try {
                            var Checking_GuxOverlay_1323 = guxOverlay;
                        } catch (ex) {
                            console.log("New solution required");
                            overrideLog(ex);
                            return false;
                        }


                        if (!popupData_1323) {

                            updatepopupData_1323(0, 1);
                            Popup.setLastClosed();

                            var overlay = guxOverlay.default.init(element);
                            overrideLog("Trigger Popup");
                            overlay.getOverlayContent('/overlay/content/overlays/target/tdr');
                            waitForOverlayOpen(overlay);
                            Popup.isPopupOpen = true;
                        }
                        else {
                            if (Popup.determineIfPopupShows()) {
                                var overlay = guxOverlay.default.init(element);
                                overrideLog("Trigger Popup");
                                overlay.getOverlayContent('/overlay/content/overlays/target/tdr');
                                waitForOverlayOpen(overlay);
                            }
                        }
                        element.remove();
                    };

                    /* Fill overlay with data */
                    OverlayHelpers.fillOverlay = function (overlay, data, closeHandlers, limit) {
                        ENV_1323.overlayInstance = overlay;
                        var overlayContent = overlay.$overlayContent;
                        var image = overlayContent.find("img.picture-tag-fallback");

                        if (limit >= 100)
                            return false;

                        if (!image.length)
                            return setTimeout(function () {
                                OverlayHelpers.fillOverlay(overlay, data, closeHandlers, limit ? limit++ : 1);
                            }, 40);

                        locateAllElements(overlayContent, image, data.offerPrice ? true : false);
                        fillFinishedBnPOverlay(data, closeHandlers);

                    };

                    function locateAllElements(overlayContent, image, hasOfferPrice) {
                        ENV_1323.elements.overlayContent = overlayContent.addClass("optprg-tdr-pop-up-1323-content");

                        ENV_1323.elements.image = image.addClass("optprg-tdr-pop-up-image");
                        ENV_1323.elements.heading = overlayContent.find("h3").addClass("optprg-tdr-pop-up-heading");
                        ENV_1323.elements.offerPrice = overlayContent.find("h4").addClass("optprg-tdr-pop-up-price");

                        var clonedPrice = ENV_1323.elements.offerPrice.clone();
                        //clonedPrice[0].outerHTML = clonedPrice[0].outerHTML.replaceAll("h4", "h5");

                        ENV_1323.elements.retailPrice = ENV_1323.elements.offerPrice.after(clonedPrice).next();
                        ENV_1323.elements.retailPrice[0].outerHTML = ENV_1323.elements.retailPrice[0].outerHTML.replaceAll('h4', 'h5');
                        ENV_1323.elements.retailPrice = overlayContent.find("h5");

                        var multiple_h5 = overlayContent.find("h5");
                        //console.log("multiple h5 ", multiple_h5);
                        if (multiple_h5.length > 1) {
                            multiple_h5[0].remove()
                        }
                        //test
                        ENV_1323.elements.afterPrices = ENV_1323.elements.retailPrice.next("p");
                        ENV_1323.elements.secondatyButton = overlayContent.find("a.cta-button.cta-button-secondary");
                        ENV_1323.elements.primaryButton = overlayContent.find("a.cta-button.cta-button-primary");
                        ENV_1323.elements.horsTaxe = ENV_1323.elements.retailPrice.after(DOMBuilder({
                            type: "p",
                            className: "hors-taxe"
                        })).next();

                        ENV_1323.elements.priceInformation = ENV_1323.elements.primaryButton.after(DOMBuilder({
                            type: "p",
                            className: "optprg-co2-info"
                        })).next();
                        ENV_1323.elements.co2Information = ENV_1323.elements.priceInformation.after(DOMBuilder({
                            type: "p",
                            className: "optprg-price-info"
                        })).next();
                    }

                    function fillFinishedBnPOverlay(data, closeHandlers) {

                        try {
                            var i = 0;
                            ENV_1323.elements.heading.html(ENV_1323.Localisation.getTranslation("heading").replace("<nameplate>", data.carName + ' ' + data.subName));
                            //var priceInfo = ENV_1323.Localisation.getTranslation("priceValidText");
                            ENV_1323.elements.priceInformation.text(ENV_1323.Localisation.getTranslation("priceValidText"));

                            if (!data.offerPrice)
                                ENV_1323.elements.offerPrice.hide();
                            else {
                                ENV_1323.elements.offerPrice.html(Constructions.getPrice({
                                    pricePrefixName: "pricePrefix",
                                    priceSuffixName: "priceSuffix",
                                    carName: data.carName,
                                    subName: " " + data.subName,
                                    price: ENV_1323.Localisation.formatMoney(data.offerPrice),
                                    recPrice: ENV_1323.Localisation.getTranslation("offerLabel"),
                                    text: ENV_1323.Localisation.getTranslation("offerDisclaimer"),
                                    number: ENV_1323.Localisation.getTranslation("offerKey"),
                                    heading: ENV_1323.Localisation.getTranslation("priceTooltipHeading"),
                                    overlay: ENV_1323.elements.overlayContent
                                }));
                            }

                            if (!data.retailPrice)
                                ENV_1323.elements.retailPrice.hide();
                            else {
                                ENV_1323.elements.retailPrice.attr("class", "optprg-retail-price-box " + (data.offerPrice ? "optprg-include-offer" : "optprg-not-include-offer")).html(Constructions.getPrice({
                                    pricePrefixName: "pricePrefix",
                                    priceSuffixName: "priceSuffix",
                                    carName: !data.offerPrice ? data.carName + " " : "",
                                    subName: !data.offerPrice ? data.subName : "",
                                    price:   ENV_1323.Localisation.formatMoney(data.retailPrice),
                                    recPrice: ENV_1323.Localisation.getTranslation("retailLabel"),
                                    text: ENV_1323.Localisation.getTranslation("retailDisclaimer"),
                                    number: ENV_1323.Localisation.getTranslation("retailKey"),
                                    heading: ENV_1323.Localisation.getTranslation("priceTooltipHeading"),
                                    overlay: ENV_1323.elements.overlayContent
                                }));
                            }


                            overrideLog('not commercial vehicle');
                            $('.duty-free').hide();
                            $('.optprg-main-price-label').hide();

                            overrideLog(data.tdr);
                            overrideLog(data.tdrVehicleCode);

                            ENV_1323.elements.overlayContent.find("source").attr("srcset", data.img);
                            ENV_1323.elements.image.removeAttr("src").attr("src", data.img).attr("alt", data.carName).attr("title", data.carName);
                            ENV_1323.elements.secondatyButton.remove();
                            ENV_1323.elements.primaryButton
                                .attr("href", data.contextualiseLink)
                                .text(ENV_1323.Localisation.getTranslation("bookTDRButton"))
                                .removeAttr("data-cta-name")
                                .addClass('optprg-primary-button')
                                .on("click", function () {

                                    closeHandlers.dontShowAgainClose("clicked_TDR_CTA", function () {

                                        adobe.target.trackEvent({
                                            "mbox": MBOXName,
                                            "params": {
                                                "linkClicked": "true"
                                            }
                                        });

                                        _satellite.track("impression-xt-popin")

                                        ENV_1323.overlayInstance.hideOverlay();
                                    }, "DE_CH_1323_main_cta_ctr");
                                });

                            ENV_1323.elements.afterPrices.hide();
                            var emissions = data.emissions.co ? getValueUnit(data.emissions.co) : { unit: "", value: "" };
                            var litersToUnit = data.emissions.lToKm ? getValueUnit(data.emissions.lToKm) : { unit: "", value: "" };
                            var hybridInfo = data.emissions.kwToKm ? getValueUnit(data.emissions.kwToKm) : { unit: "", value: "" };


                            litersToUnit.unit = litersToUnit.unit.toLowerCase();
                            litersToUnit.value = litersToUnit.value.replace('.', ',');
                            emissions.value = emissions.value.replace('.', ',');
                            hybridInfo.value = hybridInfo.value == "" ? "" : (
                                hybridInfo.value < 100 ? hybridInfo.value.replace('.', ',') : (
                                    ((hybridInfo.value / 10) + "").replace('.', ',')
                                )
                            )

                            var line_fuelConsumption = litersToUnit.value != "" ? ENV_1323.Localisation.getTranslation("fuelConsumption", {
                                ltValue: litersToUnit.value,
                                ltUnit: litersToUnit.unit
                            }) : "",
                                line_co2Information = emissions.value != "" ? ENV_1323.Localisation.getTranslation("co2Information", {
                                    coValue: emissions.value,
                                    coUnit: emissions.unit
                                }) : "",
                                line_electricConsumption = hybridInfo.value != "" ? ENV_1323.Localisation.getTranslation("electricConsumption", {
                                    kwValue: hybridInfo.value
                                }) : "";

                            if (line_fuelConsumption || line_co2Information || line_electricConsumption) {
                                ENV_1323.elements.co2Information.html(
                                    line_fuelConsumption + line_electricConsumption + line_co2Information
                                );

                                var overlayForSup = $('.optprg-tdr-pop-up-1323-content');
                                var sups = overlayForSup.find('.supThreeClick');

                                var title = ENV_1323.Localisation.getTranslation('priceTooltipHeading');
                                var text = ENV_1323.Localisation.getTranslation('disclaimer3');

                                for (var i = 0; i < sups.length; i++) {
                                    sups[i].onclick = function (e) {
                                        try {
                                            e.preventDefault();
                                            var position = $(this).offset();
                                            var size = {
                                                w: $(this).width(),
                                                h: $(this).height()
                                            };
                                            Constructions.openTooltip({
                                                top: position.top + size.h,
                                                left: position.left + size.w,
                                                bottom: 0,
                                                title: title,
                                                text: text,
                                                number: '3',
                                                overlay: overlayForSup
                                            });
                                        } catch (E) {
                                            overrideLog(E);
                                        }
                                    }
                                }
                            } else {
                                overrideLog('hidden emissions');
                                ENV_1323.elements.co2Information.hide();
                            }



                        } catch (ex) {
                            overrideLog(ex);
                        }
                    }
                    function getValueUnit(map) {
                        if (map.value != undefined)
                            return map;
                        var units = Object.keys(map);
                        if (!units.length)
                            return null;
                        return {
                            unit: map[units[0]].unit,
                            value: map[units[0]].value
                        };
                    }
                }());

                if (!display_1323 || !storedData_1323.img || !storedData_1323.carName || storedData_1323.contextualiseLink == window.location.pathname)
                    return;

                var Popupdetection = {};
                Popupdetection.getCookie = function (name) {
                    var cookie = " " + document.cookie;
                    var search = " " + name + "=";
                    var setStr = null;
                    var offset = 0;
                    var end = 0;
                    if (cookie.length > 0) {
                        offset = cookie.indexOf(search);
                        if (offset != -1) {
                            offset += search.length;
                            end = cookie.indexOf(";", offset)
                            if (end == -1) {
                                end = cookie.length;
                            }
                            setStr = unescape(cookie.substring(offset, end));
                        }
                    }
                    return (setStr);
                };

                function containsSophus() {
                    if (typeof s3_creativeDisplayed === "undefined" && (typeof s3_creativeDisplayed !== "object" || !s3_creativeDisplayed))
                        return false;
                    if (s3_creativeDisplayed)
                        return true;
                    return false;
                }


                function getCookieNameContains(nameIncludes) {
                    var allCookies = document.cookie;
                    if (allCookies.length > 0) {
                        var cookieArray = allCookies.split(';');
                        for (var i = 0; i < cookieArray.length; i++) {
                            var name = cookieArray[i].split('=')[0];
                            if (name.includes(nameIncludes))
                                return true;
                        }
                    }
                    return false;
                }

                function blockPopup() {
                    if (Popupdetection.getCookie("psyma_participation") === "1" && Popupdetection.getCookie("optprg-popups-disable")) {

                        if ($("#psyma_layer").length > 0) {
                            console.log('blocked');
                            return true;
                        }
                    }

                    if ((getCookieNameContains('IPE') || getCookieNameContains('IPE_M_')) || containsSophus()) {
                        console.log('blocked');
                        return true;
                    }

                    return false;
                }

                // if (blockPopup())
                //      return;

                loadInfo();

                setTimeout(function () {

                    if (!blockPopup()) {
                        OverlayHelpers.openOverlay(ENV_1323.MarketConfiguration.overlay, function (overlay) {

                            OverlayHelpers.fillOverlay(overlay, storedData_1323, initializeCloseHandlers(overlay.$overlayContent));

                            adobe.target.trackEvent({
                                "mbox": MBOXName,
                                "params": {
                                    "open": "pop-up-open"
                                }
                            });

                            window.targetCampaign = {
                                page: {
                                    campaignName: "tt:nwp:opt-1323:ab:ase:bpa-tdr:challenger"
                                }
                            }
                            _satellite.track("impression-xt-popin")

                            //Add this to do a 'click'
                            $('#gux3').click();
                        });
                    }
                }, ENV_1323.MarketConfiguration.delayBeforeOpenOverlay);

            }());



            $(window).load(function () {
                var objToHide = document.querySelectorAll('.optprg-carname')[1];
                if (objToHide != undefined) {
                    objToHide.style.display = 'none';
                }

                let check = setInterval(function () {
                    console.log('run ' + maxRuns);
                    if (showMe == true) {
                        if ($('.overlay-content-inner.is-active') !== undefined && $('.overlay-content-inner.is-active').length > 0) {
                            console.log('setting opacity');
                            $('.overlay-content-inner.is-active').css('opacity', '1');
                            clearInterval(check);
                        }
                    }
                    maxRuns++;
                    if (maxRuns >= 60) {
                        clearInterval(check);
                    }
                }, 1000);
            });
        }


        window.addEventListener('click', function () {
            try {
                console.log('This is to force it to stop firing');
                console.dir(window.targetCampaign);
                window.targetCampaign.page.campaignName = "";
                console.log('name is ' + window.targetCampaign.page.campaignName)
            } catch (ex) {
                console.log('Ex is');
                console.dir(ex);
            }
        })


    }
    catch (error) {
        targetErrors.push({ ticket: "1323", error })
    }
</script>

<style>
    /*

        ------------------------
        |       NOTE           |
        ------------------------
        These aren't currently in the build
        adding the styling here so when it is added
        we can get the css here.

        UPE $48,500 Retail Price
        Desktop/Tablet:

        font-family: FordAntennaRegular;
        font-size: 16px;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        line-height:1.63;
        letter-spacing: 1px;
        color: #4d4d4d;

        Disclaimer text below button
        Desktop/Tablet:

        width: 428px;
        height: 63px;
        font-family: FordAntennaRegular;
        font-size: 12px;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        line-height: 1.75;
        letter-spacing: 1px;
        color: #4d4d4d;

    */
    @media only screen and (min-width: 992px) {
        #global-ux .overlay-content.optprg-tdr-pop-up-1323-content {
            max-width: 1035px;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .splitter-column-wrap>.splitter-column:last-child {
            padding-left: 55px !important;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .image.section {
            width: 393px;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-tdr-pop-up-heading {
            font-size: 34px;
            font-weight: 300 !important;
            line-height: 1.29 !important;
            letter-spacing: 4px;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-carname {
            letter-spacing: 3px;
            font-size: 24px !important;
            line-height: 1.42 !important;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-subname {
            font-size: 24px !important;
            display: block;
        }

        #global-ux .optprg-tdr-pop-up-1323-content #id-optprg-main-price-label {
            display: block !important;
            font-size: 16px;
            line-height: 1.63;
            letter-spacing: 1px;
            text-transform: capitalize;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-primary-button {
            height: 40px;
            font-size: 12px !important;
            line-height: 0.72;
            letter-spacing: 1px;
            padding: 13px 25px 13px 25px !important;
        }
    }

    #global-ux .optprg-tdr-pop-up-1323-content .icon-x,
    #optprg-tdr-pop-up-price-tooltip .close-icon:before {
        color: #102b4e !important;
    }

    #optprg-tdr-pop-up-price-tooltip .gux-tooltip-overlay-title {
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        margin: 0px;
        font-weight: 300;
        font-size: 1.125rem;
        line-height: 1.39;
        letter-spacing: 4px;
        color: #4d4d4d;
    }

    #optprg-tdr-pop-up-price-tooltip .gux-tooltip-overlay-text {
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        font-weight: 200;
        font-size: 18px;
        line-height: 1.333;
        letter-spacing: .015em;
        margin: 0px;
    }

    #optprg-tdr-pop-up-price-tooltip .gux-tooltip-overlay-text>span {
        color: #4d4d4d !important;
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-tdr-pop-up-heading {
        text-align: center;
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        font-stretch: normal;
        font-style: normal;
        color: #4d4d4d !important;
    }

    #global-ux #id-optprg-main-price-label {
        display: block !important;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        color: #4d4d4d;
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-info,
    #global-ux .optprg-tdr-pop-up-1323-content .optprg-co2-info,
    #global-ux .optprg-tdr-pop-up-1323-content .optprg-price-info {
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        font-weight: normal !important;
        font-stretch: normal;
        font-style: normal;
        letter-spacing: 1px;
        color: #4d4d4d !important;
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-sup {
        font-size: 50%;
        top: -1em;
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-a {
        text-decoration: unset;
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        left: auto;
        vertical-align: super;
        font-size: 0.5625rem;
        cursor: pointer;
        background: none;
        border-width: initial;
        border-style: none;
        border-color: initial;
        border-image: initial;
        margin-top: 10px;
        color: #4d4d4d;
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-main-price-value {
        font-weight: 500;
        font-stretch: normal;
        font-style: normal;
        color: #4d4d4d;
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;

        font-size: 24px !important;
        line-height: 1.42;
        letter-spacing: 3px;
    }

    .price-label-resize {
        font-size: 18px !important;
        font-weight: 400;
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-primary-button {
        border-radius: 20px;
        color: #FFF !important;
        background-color: #102b4e !important;
        border-color: unset !important;
        font-weight: normal !important;
        font-stretch: normal;
        font-style: normal;
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        margin-bottom: 19px !important;
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-primary-button:hover {
        background-color: rgb(40, 97, 164) !important;
        color: rgb(255, 255, 255) !important;
        box-shadow: rgba(0, 0, 0, 0.1) 0px 10px 10px 0px, rgba(0, 0, 0, 0.1) 0px 20px 20px 0px, rgba(0, 0, 0, 0.15) 0px 30px 30px 0px !important;
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-carname {
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        font-weight: bold !important;
        font-stretch: normal;
        font-style: normal;
        color: #4d4d4d !important;
    }

    #global-ux .optprg-tdr-pop-up-1323-content p.hors-taxe {
        font-size: 12px;
    }

    #global-ux .optprg-tdr-pop-up-1323-content .cta-button.cta-button-primary {
        margin-bottom: 2rem;
        font-size: .9rem
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-vehicle-attribute-prefix,
    #global-ux .optprg-tdr-pop-up-1323-content .optprg-vehicle-attribute-suffix {
        font-size: 1.8rem;
        font-weight: 200
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-info,
    #global-ux .optprg-tdr-pop-up-1323-content .optprg-co2-info,
    #global-ux .optprg-tdr-pop-up-1323-content .optprg-price-info {
        font-size: 12px !important;
        margin: 0 !important;
        padding: 0 !important
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-tdr-pop-up-price,
    #global-ux .optprg-tdr-pop-up-1323-content .optprg-retail-price-box {
        font-size: 1.8rem !important;
        padding: 0 !important;
        margin: 0 !important;
        border: none !important
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-tdr-pop-up-price span,
    #global-ux .optprg-tdr-pop-up-1323-content .optprg-retail-price-box span {
        font-size: 1.8rem;
        /* font-size: 1.8rem !important */
    }

    #global-ux .optprg-tdr-pop-up-1323-content .optprg-retail-price-box.optprg-include-offer {
        margin-top: -12px !important;
        font-weight: normal !important;
        font-stretch: normal !important;
        font-style: normal !important;
        color: #4d4d4d !important;

        font-size: 16px !important;
        line-height: 1.63;
        letter-spacing: 1px;
    }

    /*#global-ux .optprg-tdr-pop-up-1323-content .optprg-retail-price-box.optprg-include-offer span {
        font-size: .75rem !important;
        font-weight: 300 !important;
        letter-spacing: 1px !important;
    }*/

    #global-ux .optprg-tdr-pop-up-1323-content p.optprg-main-price-label {
        font-size: .75rem;
        display: block;
        padding: 0;
        margin: 0
    }

    /* TABLET */
    @media only screen and (min-width:48em) and (max-width:61.9375em) {
        #global-ux .optprg-tdr-pop-up-1323-content {
            top: 400px !important
        }

        #global-ux .overlay-content.optprg-tdr-pop-up-1323-content {
            max-width: 537px;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-tdr-pop-up-heading {
            font-size: 24px;
            font-weight: 300 !important;
            line-height: 1.42 !important;
            letter-spacing: 3px;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-tdr-pop-up-heading br {
            display: none
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-carname {
            letter-spacing: 3px;
            font-size: 24px !important;
            line-height: 1.42 !important;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-subname {
            font-size: 24px !important;
            display: block;
        }

        #global-ux .optprg-tdr-pop-up-1323-content #id-optprg-main-price-label {
            display: block !important;
            font-size: 16px;
            line-height: 1.63;
            letter-spacing: 1px;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-primary-button {
            height: 40px;
            font-size: 12px !important;
            line-height: 0.72;
            letter-spacing: 1px;
            padding: 13px 25px 13px 25px !important;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .splitter-column-wrap {
            display: block;
            text-align-last: center;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .splitter-column-wrap .splitter-column.large-6.columns {
            display: block;
            float: none;
            padding: 0;
            width: auto
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-tdr-pop-up-image {
            width: 60%
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-car-name span {
            display: block
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-car-name .optprg-car-name-sub-name {
            margin-top: -6px !important
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-info,
        #global-ux .optprg-tdr-pop-up-1323-content .optprg-co2-info,
        #global-ux .optprg-tdr-pop-up-1323-content .optprg-price-info {
            font-size: 12px !important;
            margin: 0 !important;
            padding: 0 !important
        }
    }

    /* MOBILE */

    @media only screen and (max-width:30em),
    only screen and (min-width:30.0625em) and (max-width:47.9375em) {
        #global-ux .optprg-tdr-pop-up-1323-content .splitter-column-wrap {
            display: block;
            text-align-last: center;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-tdr-pop-up-heading {
            font-size: 20px;
            font-weight: 300 !important;
            line-height: 1.5 !important;
            letter-spacing: 3px;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-primary-button {
            height: 40px;
            font-size: 12px !important;
            line-height: 0.72;
            letter-spacing: 1px;
            padding: 13px 25px 13px 25px !important;
        }

        #global-ux .optprg-tdr-pop-up-1323-content #id-optprg-main-price-label {
            display: block !important;
            font-size: 16px;
            line-height: 1.63;
            letter-spacing: 1px;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-carname {
            letter-spacing: 3px;
            font-size: 20px !important;
            line-height: 1.5 !important;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-subname {
            font-size: 20px !important;
            display: block;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .splitter-column-wrap .splitter-column.large-6.columns {
            display: block;
            float: none;
            padding: 0;
            width: auto
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-info,
        #global-ux .optprg-tdr-pop-up-1323-content .optprg-co2-info,
        #global-ux .optprg-tdr-pop-up-1323-content .optprg-price-info {
            margin: 0 -15px !important
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-car-name {
            line-height: 2rem !important
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-car-name span {
            display: block
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-car-name .optprg-car-name-sub-name {
            margin-top: -6px !important;
            margin-bottom: 15px !important
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-tdr-pop-up-heading {
            font-weight: 300 !important;
            font-size: 1.5rem;
            line-height: 1.5rem !important;
            margin-top: 16px !important;
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-tdr-pop-up-price {
            margin-top: -10px !important
        }

        #global-ux .optprg-tdr-pop-up-1323-content .optprg-main-price-label {
            margin-bottom: 12px !important
        }
    }

    @media only screen and (max-width:47.9375em) {
        #global-ux #optprg-tdr-pop-up-price-tooltip {
            top: 0 !important;
            left: 0 !important;
            height: 100%;
            width: 100%
        }
    }

    /*.overlay-content-inner.is-active {
        opacity: 0;
    }*/
</style>