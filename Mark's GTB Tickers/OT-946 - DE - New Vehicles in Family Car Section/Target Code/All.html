<script>
    // This runs on every page.
    console.log("OT-839 - ALL");

    $(function() {
        window.targetCampaign = window.targetCampaign || {
            page: {
                campaignName: "tt:nwp:opt-839:ab:nav:family-cars:challenger"
            }
        }
        _satellite.track("genericTestingImpressionIDWorkaround");
    });
    // Mini Showroom - This is on every page
    setTimeout(function () {

        var run = true;
        var counter = 0;

        while (run) {
            if ($('.site-link-title:contains("Modelle")').length > 0) {
                $('.site-link-title:contains("Modelle")')[0].onmouseover = function () {
                    executeChanges();
                };
                $('.vehicle-menu-item:contains("Familienautos")')[0].onclick = function () {
                    executeChanges();
                };
                run = false;
            }
            counter = counter + 1;
            if (counter == 10) {
                run = false;
            }
        }

        function executeChanges() {
            if ($('.vehicle-menu-item.is-active:contains("Familienautos")').length > 0) {
                setTimeout(function () {
                    var added = false;
                    
                    if(getVehicle("FOCUS").length === 0) {
                        added = true;
                        $('.vehicle-menu-item.is-active:contains("Familienautos")').find('.vehicle-menu-content .vehicle-tiles').prepend(getFocusHTML());
                    }
                    if(getVehicle("TOURNEO COURIER").length === 0){
                        added = true;
                        $('.vehicle-menu-item.is-active:contains("Familienautos")').find('.vehicle-menu-content .vehicle-tiles').prepend(getGetTourneoHTML());
                    }
                    if(getVehicle("MONDEO").length === 0){
                        added = true;
                        $(getModeoHTML()).insertBefore($('.vehicle-menu-item.is-active:contains("Familienautos")').find('.vehicle-menu-content .vehicle-tiles div:contains("S-MAX")')[0]);
                    }
                }, 250);    
            }
        }

        function getVehicle(car) {
            return $('.vehicle-menu-item.is-active:contains("Familienautos")').find('.vehicle-menu-content .vehicle-tiles > div:contains("' + car + '")');
        }

        function getFocusHTML() {
            return `<div data-ng-repeat="vehicle in vehiclesByCategory['PKW'] track by (vehicle.name + $index)" data-category-index="0" class="tile small-12 large-4 xlarge-3 ng-scope" data-nameplatecode="WAEDX-CGE-2018-C519FocusDEU202075" data-ng-mini-showroom-repeat-callback="">

                    <a class="model-shot-link" data-ng-href="/fahrzeuge/ford-focus?vehicleNavCategory=pv" data-ng-click="extendLink($event)" tabindex="-1" href="/fahrzeuge/ford-focus?vehicleNavCategory=pv">
                        <img class="model-shot-placeholder" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+AGHA07DpzN/ckAAABIaVRYdENvbW1lbnQAAAAAAENSRUFUT1I6IGdkLWpwZWcgdjEuMCAodXNpbmcgSUpHIEpQRUcgdjYyKSwgZGVmYXVsdCBxdWFsaXR5Ctrb0JYAAAAPSURBVCjPY2AYBaOACgAAAkkAAQysdekAAAAASUVORK5CYII=" alt="FORD FOCUS">
                        <img class="model-shot" data-ng-src="//www.gpas-cache.ford.com/guid/546eba5b-4154-3075-971d-19e43918a540.png" src="//www.gpas-cache.ford.com/guid/546eba5b-4154-3075-971d-19e43918a540.png" alt="FORD FOCUS">
                    </a>
                    <div class="info">
                        <a data-ng-href="/fahrzeuge/ford-focus?vehicleNavCategory=pv" data-ng-click="extendLink($event)" tabindex="-1" href="/fahrzeuge/ford-focus?vehicleNavCategory=pv">
                            <div class="title-container">
                                <h3 class="model-title" style="height: 64px;">
                                    <span class="model-name ng-binding">FORD FOCUS</span>
                                </h3>
                            </div>
                        </a>

                        <div data-ng-vehicle-attributes="" data-attributes="getAttributes(0)" data-vehicle="vehicle" data-vehicle-specific-attributes="vehicleSpecificAttributes" data-get-vehicle-attribute="getVehicleAttribute" class="ng-isolate-scope"><!-- ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding">Unverbindliche Aktionspreisempfehlung ab</span>
                    <span class="make-price ng-binding" data-attributeid="price-promotional-bnp" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group price-promotional-bnp price-finalPrice-grossRetailWithOTRAndIncentives"><span class="vehicle-attribute-prefix"></span><span class="value">17.890</span><span class="vehicle-attribute-suffix">&nbsp;€</span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>
                    <sup data-ng-gux-disclosure="" data-disclosure="Unverbindliche Aktionspreisempfehlung" tabindex="-1" class="ng-binding ng-isolate-scope initialized" style="display: inline;">1</sup>
                    </div>
                    </div><!-- end ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding">UPE ab</span>
                    <span class="make-price ng-binding" data-attributeid="price-retail-with-otr" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group price-retail-with-otr price-finalPrice-grossRetailWithOTR"><span class="vehicle-attribute-prefix"></span><span class="value">20.568,07</span><span class="vehicle-attribute-suffix">&nbsp;€</span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>
                    <sup data-ng-gux-disclosure="" data-disclosure="UPE" tabindex="-1" class="ng-binding ng-isolate-scope initialized" style="display: inline;">2</sup>
                    </div>
                    </div><!-- end ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding"></span>
                    <span class="make-price ng-binding" data-attributeid="authored-consumption-main-label" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group authored-consumption-main-label manuallyAuthored-consumptionMain-label"><span class="vehicle-attribute-prefix"></span><span class="value">Verbrauchswerte (kombiniert):</span><span class="vehicle-attribute-suffix"></span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>
                    <sup data-ng-gux-disclosure="" data-disclosure="Verbrauch RS" tabindex="-1" class="ng-binding ng-isolate-scope initialized" style="display: inline;">3</sup>
                    </div>
                    </div><!-- end ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding">Kraftstoff</span>
                    <span class="make-price ng-binding" data-attributeid="authored-L100km-combined" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group authored-L100km-combined manuallyAuthored-fuelConsumption-combined-L100KM"><span class="vehicle-attribute-prefix"></span><span class="value">4,6</span><span class="vehicle-attribute-suffix"> L/100 km</span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>

                    </div>
                    </div><!-- end ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding">CO2-Emissionen</span>
                    <span class="make-price ng-binding" data-attributeid="authored-emissions-combined" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group authored-emissions-combined manuallyAuthored-fuelEmissions-combined-gkm"><span class="vehicle-attribute-prefix"></span><span class="value">104</span><span class="vehicle-attribute-suffix"> g/km</span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>

                    </div>
                    </div><!-- end ngRepeat: attr in attrs --></div>

                        

                    <!-- ngIf: vehicle.isHevIndicatorVisible && vehicle.hevTechnologies.length --><div class="model-hev-indicator ng-scope" data-ng-class="{'item-has-attributes': vehicle.attributeCount > 0}" data-ng-if="vehicle.isHevIndicatorVisible &amp;&amp; vehicle.hevTechnologies.length">
                    <div class="model-hev-indicator-items">
                    <!-- ngRepeat: hev in vehicle.hevTechnologies track by hev.name --><div data-ng-repeat="hev in vehicle.hevTechnologies track by hev.name" class="model-hev-indicator-item hev-mildHybrid">
                    Mild-Hybrid
                    </div><!-- end ngRepeat: hev in vehicle.hevTechnologies track by hev.name -->
                    </div>
                    <!-- ngIf: vehicle.hevTechnologies.length > 0 --><div data-ng-if="vehicle.hevTechnologies.length > 0" class="model-hev-indicator-available ng-scope">

                    </div><!-- end ngIf: vehicle.hevTechnologies.length > 0 -->
                    </div><!-- end ngIf: vehicle.isHevIndicatorVisible && vehicle.hevTechnologies.length -->



                    </div>
                    </div>`;
        }

        function getModeoHTML() {
            return `<div data-ng-repeat="vehicle in vehiclesByCategory['PKW'] track by (vehicle.name + $index)" data-category-index="0" class="tile small-12 large-4 xlarge-3 ng-scope" data-nameplatecode="WAEDX-CNG-2013-CD391MondeoDEU202050" data-ng-mini-showroom-repeat-callback="">

                    <a class="model-shot-link" data-ng-href="/fahrzeuge/ford-mondeo?vehicleNavCategory=pv" data-ng-click="extendLink($event)" tabindex="-1" href="/fahrzeuge/ford-mondeo?vehicleNavCategory=pv">
                        <img class="model-shot-placeholder" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+AGHA07DpzN/ckAAABIaVRYdENvbW1lbnQAAAAAAENSRUFUT1I6IGdkLWpwZWcgdjEuMCAodXNpbmcgSUpHIEpQRUcgdjYyKSwgZGVmYXVsdCBxdWFsaXR5Ctrb0JYAAAAPSURBVCjPY2AYBaOACgAAAkkAAQysdekAAAAASUVORK5CYII=" alt="FORD MONDEO">
                        <img class="model-shot" data-ng-src="//www.gpas-cache.ford.com/guid/b1ffbc0b-749e-36df-a971-eddcc4b788ff.png" src="//www.gpas-cache.ford.com/guid/b1ffbc0b-749e-36df-a971-eddcc4b788ff.png" alt="FORD MONDEO">
                    </a>
                    <div class="info">
                        <a data-ng-href="/fahrzeuge/ford-mondeo?vehicleNavCategory=pv" data-ng-click="extendLink($event)" tabindex="-1" href="/fahrzeuge/ford-mondeo?vehicleNavCategory=pv">
                            <div class="title-container">
                                <h3 class="model-title" style="height: 64px;">
                                    <span class="model-name ng-binding">FORD MONDEO</span>
                                </h3>
                            </div>
                        </a>

                        <div data-ng-vehicle-attributes="" data-attributes="getAttributes(0)" data-vehicle="vehicle" data-vehicle-specific-attributes="vehicleSpecificAttributes" data-get-vehicle-attribute="getVehicleAttribute" class="ng-isolate-scope"><!-- ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding">Unverbindliche Aktionspreisempfehlung ab</span>
                    <span class="make-price ng-binding" data-attributeid="price-promotional-bnp" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group price-promotional-bnp price-finalPrice-grossRetailWithOTRAndIncentives"><span class="vehicle-attribute-prefix"></span><span class="value">28.190</span><span class="vehicle-attribute-suffix">&nbsp;€</span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>
                    <sup data-ng-gux-disclosure="" data-disclosure="Unverbindliche Aktionspreisempfehlung" tabindex="-1" class="ng-binding ng-isolate-scope initialized" style="display: inline;">1</sup>
                    </div>
                    </div><!-- end ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding">UPE ab</span>
                    <span class="make-price ng-binding" data-attributeid="price-retail-with-otr" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group price-retail-with-otr price-finalPrice-grossRetailWithOTR"><span class="vehicle-attribute-prefix"></span><span class="value">32.168,07</span><span class="vehicle-attribute-suffix">&nbsp;€</span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>
                    <sup data-ng-gux-disclosure="" data-disclosure="UPE" tabindex="-1" class="ng-binding ng-isolate-scope initialized" style="display: inline;">2</sup>
                    </div>
                    </div><!-- end ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding"></span>
                    <span class="make-price ng-binding" data-attributeid="authored-consumption-main-label" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group authored-consumption-main-label manuallyAuthored-consumptionMain-label"><span class="vehicle-attribute-prefix"></span><span class="value">Verbrauchswerte (kombiniert):</span><span class="vehicle-attribute-suffix"></span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>
                    <sup data-ng-gux-disclosure="" data-disclosure="Verbrauch RS" tabindex="-1" class="ng-binding ng-isolate-scope initialized" style="display: inline;">3</sup>
                    </div>
                    </div><!-- end ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding">Kraftstoff</span>
                    <span class="make-price ng-binding" data-attributeid="authored-L100km-combined" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group authored-L100km-combined manuallyAuthored-fuelConsumption-combined-L100KM"><span class="vehicle-attribute-prefix"></span><span class="value">4,7</span><span class="vehicle-attribute-suffix"> L/100 km</span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>

                    </div>
                    </div><!-- end ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding">CO2-Emissionen</span>
                    <span class="make-price ng-binding" data-attributeid="authored-emissions-combined" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group authored-emissions-combined manuallyAuthored-fuelEmissions-combined-gkm"><span class="vehicle-attribute-prefix"></span><span class="value">108</span><span class="vehicle-attribute-suffix"> g/km</span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>

                    </div>
                    </div><!-- end ngRepeat: attr in attrs --></div>

                        

                    <!-- ngIf: vehicle.isHevIndicatorVisible && vehicle.hevTechnologies.length --><div class="model-hev-indicator ng-scope" data-ng-class="{'item-has-attributes': vehicle.attributeCount > 0}" data-ng-if="vehicle.isHevIndicatorVisible &amp;&amp; vehicle.hevTechnologies.length">
                    <div class="model-hev-indicator-items">
                    <!-- ngRepeat: hev in vehicle.hevTechnologies track by hev.name --><div data-ng-repeat="hev in vehicle.hevTechnologies track by hev.name" class="model-hev-indicator-item hev-hybrid">
                    Hybrid
                    </div><!-- end ngRepeat: hev in vehicle.hevTechnologies track by hev.name -->
                    </div>
                    <!-- ngIf: vehicle.hevTechnologies.length > 0 --><div data-ng-if="vehicle.hevTechnologies.length > 0" class="model-hev-indicator-available ng-scope">

                    </div><!-- end ngIf: vehicle.hevTechnologies.length > 0 -->
                    </div><!-- end ngIf: vehicle.isHevIndicatorVisible && vehicle.hevTechnologies.length -->



                    </div>
                    </div>`;
        }

        function getGetTourneoHTML() {
            return `<div data-ng-repeat="vehicle in vehiclesByCategory['PKW'] track by (vehicle.name + $index)" data-category-index="0" class="tile small-12 large-4 xlarge-3 ng-scope" data-nameplatecode="WAEDX-C4A-2014-TourneoCourierDEU202075" data-ng-mini-showroom-repeat-callback="">

                    <a class="model-shot-link" data-ng-href="/nutzfahrzeuge/ford-tourneo-courier?vehicleNavCategory=pv" data-ng-click="extendLink($event)" tabindex="-1" href="/nutzfahrzeuge/ford-tourneo-courier?vehicleNavCategory=pv">
                        <img class="model-shot-placeholder" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+AGHA07DpzN/ckAAABIaVRYdENvbW1lbnQAAAAAAENSRUFUT1I6IGdkLWpwZWcgdjEuMCAodXNpbmcgSUpHIEpQRUcgdjYyKSwgZGVmYXVsdCBxdWFsaXR5Ctrb0JYAAAAPSURBVCjPY2AYBaOACgAAAkkAAQysdekAAAAASUVORK5CYII=" alt="FORD TOURNEO COURIER">
                        <img class="model-shot" data-ng-src="//www.gpas-cache.ford.com/guid/9d934eee-6daf-3b01-a304-aad55ffd766e.png" src="//www.gpas-cache.ford.com/guid/9d934eee-6daf-3b01-a304-aad55ffd766e.png" alt="FORD TOURNEO COURIER">
                    </a>
                    <div class="info">
                        <a data-ng-href="/nutzfahrzeuge/ford-tourneo-courier?vehicleNavCategory=pv" data-ng-click="extendLink($event)" tabindex="-1" href="/nutzfahrzeuge/ford-tourneo-courier?vehicleNavCategory=pv">
                            <div class="title-container">
                                <h3 class="model-title" style="height: 64px;">
                                    <span class="model-name ng-binding">FORD TOURNEO COURIER</span>
                                </h3>
                            </div>
                        </a>

                        <div data-ng-vehicle-attributes="" data-attributes="getAttributes(0)" data-vehicle="vehicle" data-vehicle-specific-attributes="vehicleSpecificAttributes" data-get-vehicle-attribute="getVehicleAttribute" class="ng-isolate-scope"><!-- ngRepeat: attr in attrs --><div data-ng-repeat="attr in attrs" class="make-info ">
                    <div class="make-info-inner">
                    <span class="make-prefix ng-binding">UPE ab</span>
                    <span class="make-price ng-binding" data-attributeid="price-retail-with-otr" data-ng-bind-html="getVehicleAttribute(attr.attributeId, vehicle)"><span class="vehicle-attribute-group price-retail-with-otr price-finalPrice-grossRetailWithOTR"><span class="vehicle-attribute-prefix"></span><span class="value">17.863,01</span><span class="vehicle-attribute-suffix">&nbsp;€</span></span></span>
                        
                    <span class="make-suffix ng-binding"></span>
                    <sup data-ng-gux-disclosure="" data-disclosure="UPE" tabindex="-1" class="ng-binding ng-isolate-scope initialized" style="display: inline;">2</sup>
                    </div>
                    </div><!-- end ngRepeat: attr in attrs --></div>

                        

                    <!-- ngIf: vehicle.isHevIndicatorVisible && vehicle.hevTechnologies.length -->



                    </div>
                    </div>`;
        }

    }, 1000);
</script>