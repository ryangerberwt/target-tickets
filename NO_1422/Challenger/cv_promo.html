<script>
    var storedData_1422;
    var $ = jQuery;
    var targetErrors = targetErrors || [];
    console.log('OT-1422 | CV PROMO | CHALLENGER');
    var myinterval;
    var myMarket = "NO";
    var myTicket = "1422";
    var preventRun = false;
    console.log('CV PROMO GUX 1.0');
    var enableLogs = false;
    var _log = console.log;
        console.log = function(logMsg){
            if(enableLogs){
     
                _log.apply(console,arguments);
            }
        }
        //Added because we sometimes use the console.dir function to display vars
        var _dir = console.dir;
        console.dir = function(dirMsg){
            if(enableLogs){
                _dir.apply(console,arguments);
            }
        }

    function getCookie(name) {
        function escape(s) { return s.replace(/([.*+?\^$(){}|\[\]\/\\])/g, '\\$1'); }
        var match = document.cookie.match(RegExp('(?:^|;\\s*)' + escape(name) + '=([^;]*)'));
        return match ? match[1] : null;
    }

    function setCookieForImpressionID(expireInHours,path,cookieName,cookieValue) {
        console.log("setting cookie for impression ID");
        if (getCookie(cookieName) === undefined || getCookie(cookieName) === "" || getCookie(cookieName) === null) {
          console.log("no cookie set --- setting now");
          var now = new Date();
          now.setTime(now.getTime() + expireInHours * 3600 * 1000);
          document.cookie = cookieName + "=" + cookieValue + ";path=" + path + ";expires=" + now.toUTCString();
          console.log("cookie is set");
          window.targetCampaign =  {
            page: {
                campaignName: "tt:nwp:opt-1422:ab:tdr:tdra-tdrc:challenger",
            },
        };

        _satellite.track("genericTestingImpressionIDWorkaround");
        } else {
          console.log("Cookie is still valid");
        }
      }

    function checkIfPV(){
        var listOfPv = [
            'transit connect',
            'transit custom',
            'ranger'
        ]

        if(listOfPv.includes(storedData_1422.carName.toLowerCase().replace('ford nye ',''))){
            return true;
        }
        return false;
    }



    function isNull(obj) {
        return obj == undefined || obj == null || obj == "";
    }

    function formatCarName(){
        let nameArr = storedData_1422.carName.replace('Ford ', '').split(' ');
        let carNameStr = "";

        nameArr.forEach(element => {
            console.log('element ' + element);
            let firstLetter = element.substring(0,1).toUpperCase();
        
            carNameStr += " " + firstLetter + element.substring(1,element.length).toLowerCase(); 

        });

        return carNameStr;

    }

    // Vehicle Info
    if (localStorage.getItem('carInfo') === null) {
        storedData_1422 = {
            carName: '',
            imgSrc: '',
            vehicleCode: '',
            contextualiseLink: 'https://www.ford.no/kjoepe/neste-steg/bestill-proevekjoering',
            headingNoContext: 'Fikk du ikke bestilt prøvekjøring? Vil du prøve igjen?',
            headingWithContext: '',
            ctaCopy: 'Prøvekjøring',
            visited: false
        }
    } else {
        storedData_1422 = {
            carName: JSON.parse(localStorage.getItem('carInfo')).carName,
            imgSrc: JSON.parse(localStorage.getItem('carInfo')).imgSrc,
            vehicleCode: '',
            contextualiseLink: 'https://www.ford.no/kjoepe/neste-steg/bestill-proevekjoering',
            headingNoContext: 'Fikk du ikke bestilt prøvekjøring? Vil du prøve igjen?',
            headingWithContext: 'Fikk du ikke bestilt prøvekjøring av ' + JSON.parse(localStorage.getItem('carInfo')).carName + ' ? Vil du prøve igjen? ',
            ctaCopy: 'Prøvekjøring',
            visited: JSON.parse(localStorage.getItem('carInfo')).visited
        }
    }

    function storePopinState(last_closed, display_count) {
        let objs = {
            last_closed_time: last_closed, alert_display_count: display_count
        }
        localStorage.setItem('popinState', JSON.stringify(objs));
        console.log('local storage');
        console.log(JSON.parse(localStorage.getItem('popinState')));
    }

    function compareLastClosed() {
        let popupState = JSON.parse(localStorage.getItem('popinState'));
        let current_timestamp = Math.floor(Date.now() / 1000);
        let last_closed_current = Math.floor(popupState.last_closed_time / 1000);
        var minuteDifference = (current_timestamp / 60) - (last_closed_current / 60);
        if (minuteDifference >= 15) {

            //It's been 15 days, clear LS
            if (minuteDifference >= 21600) {
                storePopinState(null, Number(0));
                return true;
            }

            if (popupState.alert_display_count < 3) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    }

    function getVC() {
        modelsJson = $.getJSON("https://www.ford.no/content/guxeu/no/no_no/configuration/applications-and-services/ngc-configuration-bev.model.json", function (data) {
            $.each(data.nameplateConfig.labels, function (key, val) {

                //console.log('checking ' + storedData_1422.carName + ' against ' + val.value);
                if (storedData_1422.carName.toUpperCase().includes(val.value) || storedData_1422.carName.toUpperCase().replace('NYE','').includes(val.value)) {
                 console.log('found v code');

                    //Get info from API cache

                   /* var url = [
                        "https://www.servicescache.ford.com/api",
                        "/vehicleModel/",
                        "v1",
                        "/load?locale=",
                        "no_NO",
                        "&retrieve=images,specs,featuresMkt,selectedMkt,featureImages,featureSpecs,keyFeatures,keyFeaturesModel,uscCodes,prices,featurePrices&namedConfig=",
                        "default",
                        "&config=",
                        val.key
                    ].join("");
                    console.log('ajax start URL ' + url);
                    $.ajax({
                        url: url,
                        xhrFields: {
                            withCredentials: false
                        }
                    }).done(function (response) {
                        console.log('DONE');
                        if (response.status && response.status.statusCode === 200) {
                            console.log('SUCCESS');
                            console.dir(response);
                            //sessionStorage.setItem(key, JSON.stringify(response.data));
                            //return callback(undefined, response.data, key);
                        } else {
                            console.error('ERR LOAD');
                            console.dir(response);
                        }
                    }).fail(function (err) {
                        console.error('ERR FAIL');
                        console.dir(err);
                    });
                    */

                    console.log('getting vcode into vars')
                    storedData_1422.vehicleCode = val.formsContext;
                    if(storedData_1422.carName.toLowerCase().trim() === 'mustang mach-e'){
                        storedData_1422.vehicleCode = "?vehicleCode=CGW02";
                    }
                    storedData_1422.contextualiseLink = "https://www.ford.no/kjoepe/neste-steg/bestill-proevekjoering" + storedData_1422.vehicleCode;
                    $('.optprg-primary-button').attr('href', storedData_1422.contextualiseLink);
                    console.log('done getting vcode into vars')
                }
            });
        });
    }

    function fix() {
        console.log('running fix');

        $('.regular.richtext-inner>p:contains("Prices correct as of")').siblings().remove();
        $('.regular.richtext-inner>p:contains("Prices correct as of")').remove();
        $('.splitter-column.large-6.columns>div>.image.section>.component-content>picture>source').attr('srcSet', storedData_1422.imgSrc);
        if (window.innerWidth > 899) {
            $('.splitter-column.large-6.columns').eq(1).css('top', '9rem')
        }

    }

    // Popup Data
    var popupData_1422 = {
        popup_last_closed: Number("${profile.no.popup_last_closed}"),
        popup_display_count: Number("${profile.no.popup_display_count}")
    };
    console.log("stored data: ", storedData_1422);
    var v_name = storedData_1422.carName;
    var v_name_arr = v_name.split(" ");
    var re = /^[A-Za-z]+$/;
    if (v_name_arr.length > 2) {
        v_name_arr.forEach((elment, index) => {
            if (!re.test(elment)) {
                var x = v_name_arr.splice(index, 1)
                v_name = v_name_arr.join(" ");
            }
        })
    }

    v_name = v_name_arr.join(" ").replace("Ford", '').trim();
    if (v_name == "ECO SPORT") {
        v_name = "EcoSport"
    }
    storedData_1422.carName = "Ford " + v_name;

    // Just in case data from a different Market gets through
    // Also checks if a vehicleCode is available, if it doesn't it won't display.
    var display_1422 = "NO" == myMarket && "1422" == myTicket && checkIfPV() === true && ((storedData_1422.carName.toLowerCase().trim().indexOf('fiesta') < 0 && storedData_1422.carName.toLowerCase().trim().indexOf('mondeo') < 0))
        && storedData_1422.visited === true
        && (
            storedData_1422.carName !== ''
            && storedData_1422.carName.replace('Ford ', '') !== ''
           );
    if (display_1422) {
        $(document).ready(function () {
            function overrideLog(error) {
                if (/targetDebug=1422/i.test(window.location.href)) {
                    console.log(error);
                }
                targetErrors.push({ ticket: "1422", error });

                if (storedData_1422.carName.replace('Ford', '') !== '') {
                    console.log('checking for VC');
                    getVC();
                }



            }
            /**
            *
            *	DOM builder
            *	(requires jQuery)
            *
            * #def name DOMBuilder
            *
            *	SYNTAX:
            *	jQueryobject DOMbuilder(srcObject);
            *
            *	srcObject = DOMobject || [array of DOMobject] || jQueryObject || [array of jQueryObject] || function (returning srcObject);
            *
            *	DOMobject = {
            *		type: 'div',
            *		id: 'elm-id' || null,
                render: boolean, // You can decide if element will be rendered
            *		className: 'elm-class' || 'elm-class-1 elm-class-2' || null,
            *		data: { key: key, value: value } || null,
            *		text: 'Text content' || null,
            *		html: 'HTML content' || null,		// if html provided, text is ignored
            *		child: srcObject || null
            *		handlers: { eventID: function, ... } || null,
            *		callback: function($element) || null
            *		} || [ array of DOMobj ]
            *
            */
            function DOMBuilder(obj) {
                if (!obj) return;
                if ($.isArray(obj)) {
                    var i, arr = [];
                    for (i = 0; i < obj.length; i++) {
                        (obj[i] instanceof $) ? arr.push(obj[i]) : arr.push(DOMBuilder(obj[i]));
                    }
                    return arr;
                } else if (obj instanceof $) return obj;
                else if ($.isFunction(obj)) return DOMBuilder(obj());
                else {
                    if (!obj.type) return obj.html || obj.text || undefined;
                    if (obj.hasOwnProperty("render") && !obj.render)
                        return undefined;
                    var $e = $('<' + obj.type + '>');
                    if (obj.id) $e.prop('id', obj.id);
                    if (obj.className) $e.addClass(obj.className);
                    if ($.isPlainObject(obj.data) && obj.data.key) $e.data(obj.data.key, obj.data.value);
                    obj.html ? $e.html(obj.html) : $e.text(obj.text || '');
                    if (obj.child) $e.append(DOMBuilder(obj.child));
                    if ($.isPlainObject(obj.handlers)) {
                        for (var evName in obj.handlers) $e.on(evName, obj.handlers[evName]);
                    }
                    if ($.isPlainObject(obj.props)) {
                        for (var propName in obj.props) $e.prop(propName, obj.props[propName]);
                    }
                    if ($.isFunction(obj.callback)) obj.callback($e);
                    return $e;
                }
            }

            /**
            * JS VARIANT "Challenger" - Create testdrive popin or similar approach to generate additional testdrive leads
            */

            var Constructions = {};
            var ENV = {
                elements: {},
                data: {}
            };

            // Configurations
            /* Market configuration */

            $(document).ready(function (environment) {
                environment.MarketConfiguration = {
                    // Define overlay URL
                    overlay: "/overlay/content/overlays/target/tdr",
                    // Define delay in ms before opening overlay
                    delayBeforeOpenOverlay: 4000,
                    // Panel with informations like CO2
                    carDataSelector: "#global-ux .summary-wrapper .vehicle-info-view .vehicle-data .vehicle-data-row",
                    // Selectors to disclaimers in summary page
                    // Determine which data will be grabed from summary page
                    summaryPageDataDestinations: [{
                        // Image of car
                        query: "#build-price-configurator > div.app-view > div > div:nth-child(5) > section > div.vehicle-view-container > div.vehicle-view-content.right-content > div > img",
                        prop: "src",
                        key: "img"
                    }, {
                        // Find a dealer link
                        query: "a[data-contextual-link=\"dealer-locator\"]",
                        prop: "href",
                        key: "findDealer"
                    }, {
                        // Car nameplate name
                        query: "#build-price-configurator > div.app-view > div > div:nth-child(5) > section > div.vehicle-view-container > div.vehicle-view-content.left-content > h3 > strong",
                        text: true,
                        key: "carName"
                    }]
                };
            }(ENV));

            var MBOXName = "NO_TDR_A";
            var MBOXFallbackTimeout = 300;

            /* Define texts - easily move across markets */

            $(document).ready(function (environment) {
                storedData_1422.carName = formatCarName();
                storedData_1422.headingWithContext = 'Fikk du ikke bestilt prøvekjøring av' + storedData_1422.carName + '? Vil du prøve igjen? '
              
                var translations = {
                    heading: storedData_1422.carName !== '' ? storedData_1422.headingWithContext : storedData_1422.headingNoContext,
                    dutyFree: "",
                    bookTDRButton: storedData_1422.ctaCopy,
                    buttonURL: storedData_1422.contextualiseLink
                };


                environment.Localisation = {
                    formatDate: formatDate,
                    formatMoney: function (amount) {
                        return Number(Number(amount).toFixed(0)).toLocaleString().replace(/\,/gm, ".")
                    },
                    getTranslation: getTranslation,
                    updateTranslations: updateTranslations
                };


                function getTranslation(key, replacements) {
                    var tr = translations[key];
                    if (!tr)
                        return;
                    if (replacements) {
                        $(Object.keys(replacements)).each(function (i, replace) {
                            tr = tr.replace("<" + replace + ">", replacements[replace]);
                        });
                    }

                    overrideLog(key + ": " + tr);
                    return tr;
                }

                function updateTranslations(key, replacements) {
                    try {
                        if (replacements) {
                            translations[key] = replacements;
                        }
                    } catch (e) {
                        // assume key doesn't exist.
                        overrideLog(e);
                    }

                }

                function formatDate(date) {
                    return date.getDate() + "/" + (date.getMonth() + 1) + "/" + date.getFullYear();
                }
            }(ENV));

            var StorageHandler = {};
            StorageHandler.cookie = "opt-gux-no"; // opt-gux-MARKET ~ for countries with multiple locales, name it MARKET_LANG ~ Always lower case.
            StorageHandler.getData = function () {
                var current = JSON.parse(localStorage.getItem(StorageHandler.cookie));
                if (current == null)
                    return [];
                else
                    return current;
            };
            StorageHandler.saveData = function (key, data) {
                var current = StorageHandler.getData();
                var exists = StorageHandler.getSpecificData(key);

                if (exists.length > 0) {
                    for (var i = 0; i < current.length; i++) {
                        if (current[i].key == key) {
                            current[i].data = data;
                        }
                    }
                } else {
                    current.push({ key, data });
                }
                localStorage.setItem(StorageHandler.cookie, JSON.stringify(current));
            };
            StorageHandler.getSpecificData = function (key) {
                var current = StorageHandler.getData();
                return current.filter(function (each) {
                    return each.key == key;
                });
            };

            // Handlers
            /* Handle close events */

            function initializeCloseHandlers(overlay) {
                function destroy() {
                    $(document).unbind("keydown", onKeyPress);
                    destroyOverlay();
                }
                function destroyOverlay() {
                    var content = $('.optprg-tdr-pop-up-1422-content'); // Replace 1041 to match the ticket you're on.
                    if (content.length > 0) {
                        var contentParent = content[0].parentElement;
                        if (!isNull(contentParent) && contentParent.classList.value.includes('overlay-container')) {
                            contentParent.remove();
                        }
                    }
                }
                var handlers = {
                    dontShowAgainClose: function (wayOfDestroy, callback, mbox) {
                        adobe.target.trackEvent({
                            mbox: mbox,
                            params: {
                                release: wayOfDestroy,
                                popup: wayOfDestroy
                            },
                            success: function () {
                                if (callback)
                                    callback();
                            },
                            error: function () {
                                if (callback)
                                    callback();
                            }
                        });
                        if (callback)
                            setTimeout(function () {
                                callback();
                            }, MBOXFallbackTimeout);
                        destroy();
                    },
                    showAgainClose: function (wayOfDestroy, mbox) {
                        adobe.target.trackEvent({
                            mbox: mbox,
                            params: {
                                popup: wayOfDestroy
                            }
                        });
                        destroy();
                    }
                };
                function onKeyPress(e) {
                    if (e.keyCode == 27) {
                        var displayCount = 0;
                        if (JSON.parse(localStorage.getItem('popinState')).alert_display_count !== undefined) {
                            displayCount = JSON.parse(localStorage.getItem('popinState')).alert_display_count + 1;
                        } else {
                            display_count = 1;
                        }

                        handlers.dontShowAgainClose("close_escape_keyboard", storePopinState(Math.floor(Date.now()), displayCount), "NO_1422_close_cta_ctr");
                    }
                }
                $(document).on("keydown", onKeyPress);
                overlay.find("span.overlay-close").on("click", function (e) {
                    var displayCount = 0;
                    if (JSON.parse(localStorage.getItem('popinState')).alert_display_count !== undefined) {
                        displayCount = JSON.parse(localStorage.getItem('popinState')).alert_display_count + 1;
                    } else {
                        display_count = 1;
                    }
                    handlers.dontShowAgainClose("clicked_x", storePopinState(Math.floor(Date.now()), displayCount), "NO_1422_close_cta_ctr");
                });
                overlay.parent(".overlay-container").on("click", function (e) {
                    var displayCount = 0;
                    if (JSON.parse(localStorage.getItem('popinState')).alert_display_count !== undefined) {
                        displayCount = JSON.parse(localStorage.getItem('popinState')).alert_display_count + 1;
                    } else {
                        display_count = 1;
                    }
                    if ($(e.target).hasClass("overlay-container"))
                        handlers.showAgainClose("clicked_outside_overlay", storePopinState(Math.floor(Date.now()), displayCount), "NO_1422_close_cta_ctr");
                });
                return handlers;
            }

            function updatepopupData_1422(popup_last_closed, popup_display_count) {
                adobe.target.getOffer({
                    'mbox': 'global-mbox',
                    'params': {
                        'profile.no.popup_last_closed': popup_last_closed,
                        'profile.no.popup_display_count': popup_display_count
                    },
                    'success': function (offer) {
                        adobe.target.applyOffer({
                            'mbox': 'global-mbox',
                            'offer': offer
                        });
                    },
                    'error': function (status, error) {
                        console.log('Error', status, error);
                    }
                });
            }

            var Popup = {};
            Popup.determineIfPopupShows = function () {
                if (compareLastClosed() === false) {
                    return false;
                }

                return (compareLastClosed()) || /targetDebug=1422/i.test(window.location.href);

            };
            Popup.setKeyValue = function (key, value) {

                popupData_1422[key] = value;

                updatepopupData_1422(popupData_1422.popup_last_closed, popupData_1422.popup_display_count)
            };

            /* Open TDR Overlay */
            var OverlayHelpers = {};

            $(document).ready(function () {


                if (localStorage.getItem('popinState') === undefined || localStorage.getItem('popinState') === null) {
                    storePopinState(null, Number(0));
                }
                OverlayHelpers.openOverlay = function (overlay, onOverlayOpen) {
                    if (compareLastClosed() === false) {
                        return false;
                    }

                    var element = $("<a href=\"" + overlay + "\" style=\"display: none;\" class='test-me'></a>");
                    $("body").append(element);

                    function waitForOverlayOpen(overlay) {
                        if (!overlay.$overlayContent)
                            return setTimeout(function () {
                                waitForOverlayOpen(overlay);
                            }, 50);
                        onOverlayOpen(overlay);
                    }


                    /*require(['overlay/component.overlay'],*/

                    element.on('click', function (e) {
                        e.preventDefault();
                    });

                    try {
                        var Checking_GuxOverlay_1422 = guxOverlay;
                    } catch (ex) {
                        console.log("New solution required");
                        overrideLog(ex);
                        return false;
                    }


                    if (!popupData_1422) {

                        updatepopupData_1422(0, 1);
                        Popup.setLastClosed();

                        var overlay = guxOverlay.default.init(element);
                        overrideLog("Trigger Popup");
                        overlay.getOverlayContent('/overlay/content/overlays/target/tdr');
                        waitForOverlayOpen(overlay);
                        Popup.isPopupOpen = true;
                    }
                    else {
                        if (Popup.determineIfPopupShows()) {
                            var overlay = guxOverlay.default.init(element);
                            overrideLog("Trigger Popup");
                            overlay.getOverlayContent('/overlay/content/overlays/target/tdr');
                            waitForOverlayOpen(overlay);
                        }
                    }
                    element.remove();
                };

                /* Fill overlay with data */
                OverlayHelpers.fillOverlay = function (overlay, data, closeHandlers, limit) {
                    ENV.overlayInstance = overlay;
                    var overlayContent = overlay.$overlayContent;
                    var image = overlayContent.find("img.picture-tag-fallback");

                    if (limit >= 100)
                        return false;

                    if (!image.length)
                        return setTimeout(function () {
                            OverlayHelpers.fillOverlay(overlay, data, closeHandlers, limit ? limit++ : 1);
                        }, 40);

                    locateAllElements(overlayContent, image, false);
                    fillFinishedBnPOverlay(data, closeHandlers);

                };

                function locateAllElements(overlayContent, image, hasOfferPrice) {
                    ENV.elements.overlayContent = overlayContent.addClass("optprg-tdr-pop-up-1422-content");

                    ENV.elements.image = image.addClass("optprg-tdr-pop-up-image");
                    ENV.elements.heading = overlayContent.find("h3").addClass("optprg-tdr-pop-up-heading");


                    var multiple_h5 = overlayContent.find("h5");
                    console.log("multiple h5 ", multiple_h5);
                    if (multiple_h5.length > 1) {
                        multiple_h5[0].remove()
                    }
                    //test
                    ENV.elements.secondatyButton = overlayContent.find("a.cta-button.cta-button-secondary");
                    ENV.elements.primaryButton = overlayContent.find("a.cta-button.cta-button-primary");
                }

                function fillFinishedBnPOverlay(data, closeHandlers) {

                    try {
                        var i = 0;
                        ENV.elements.heading.html(ENV.Localisation.getTranslation("heading").replace("<nameplate>", data.carName + ' ' + data.subName));

                        overrideLog('not commercial vehicle');
                        $('.duty-free').hide();

                        overrideLog(data.tdr);
                        overrideLog(data.tdrVehicleCode);

                        ENV.elements.overlayContent.find("source").attr("srcset", data.img);
                        ENV.elements.image.removeAttr("src").attr("src", data.img).attr("alt", data.carName).attr("title", data.carName);
                        ENV.elements.secondatyButton.remove();
                        ENV.elements.primaryButton
                            .attr("href", storedData_1422.contextualiseLink)
                            .text(ENV.Localisation.getTranslation("bookTDRButton"))
                            .removeAttr("data-cta-name")
                            .addClass('optprg-primary-button')
                            .on("click", function () {

                                closeHandlers.dontShowAgainClose("clicked_TDR_CTA", function () {

                                    adobe.target.trackEvent({
                                        "mbox": MBOXName,
                                        "params": {
                                            "linkClicked": "true"
                                        }
                                    });

                                    _satellite.track("impression-xt-popin")

                                    ENV.overlayInstance.hideOverlay();
                                }, "NO_1422_main_cta_ctr");
                            });

                        var emissions = data.emissions.co ? getValueUnit(data.emissions.co) : { unit: "", value: "" };
                        var litersToUnit = data.emissions.lToKm ? getValueUnit(data.emissions.lToKm) : { unit: "", value: "" };
                        var hybridInfo = data.emissions.kwToKm ? getValueUnit(data.emissions.kwToKm) : { unit: "", value: "" };


                        litersToUnit.unit = litersToUnit.unit.toLowerCase();
                        litersToUnit.value = litersToUnit.value.replace('.', ',');
                        emissions.value = emissions.value.replace('.', ',');
                        hybridInfo.value = hybridInfo.value == "" ? "" : (
                            hybridInfo.value < 100 ? hybridInfo.value.replace('.', ',') : (
                                ((hybridInfo.value / 10) + "").replace('.', ',')
                            )
                        )

                        var line_fuelConsumption = litersToUnit.value != "" ? ENV.Localisation.getTranslation("fuelConsumption", {
                            ltValue: litersToUnit.value,
                            ltUnit: litersToUnit.unit
                        }) : "",
                            line_co2Information = emissions.value != "" ? ENV.Localisation.getTranslation("co2Information", {
                                coValue: emissions.value,
                                coUnit: emissions.unit
                            }) : "",
                            line_electricConsumption = hybridInfo.value != "" ? ENV.Localisation.getTranslation("electricConsumption", {
                                kwValue: hybridInfo.value
                            }) : "";

                        if (line_fuelConsumption || line_co2Information || line_electricConsumption) {
                            ENV.elements.co2Information.html(
                                line_fuelConsumption + line_electricConsumption + line_co2Information
                            );

                            var overlayForSup = $('.optprg-tdr-pop-up-1422-content');
                            var sups = overlayForSup.find('.supThreeClick');
                            var text = ENV.Localisation.getTranslation('disclaimer3');

                            for (var i = 0; i < sups.length; i++) {
                                sups[i].onclick = function (e) {
                                    try {
                                        e.preventDefault();
                                        var position = $(this).offset();
                                        var size = {
                                            w: $(this).width(),
                                            h: $(this).height()
                                        };
                                        Constructions.openTooltip({
                                            top: position.top + size.h,
                                            left: position.left + size.w,
                                            bottom: 0,
                                            title: title,
                                            text: text,
                                            number: '3',
                                            overlay: overlayForSup
                                        });
                                    } catch (E) {
                                        overrideLog(E);
                                    }
                                }
                            }
                        } else {
                            overrideLog('hidden emissions');
                            ENV.elements.co2Information.hide();
                        }



                    } catch (ex) {
                        overrideLog(ex);
                    }
                }
                function getValueUnit(map) {
                    if (map.value != undefined)
                        return map;
                    var units = Object.keys(map);
                    if (!units.length)
                        return null;
                    return {
                        unit: map[units[0]].unit,
                        value: map[units[0]].value
                    };
                }
            }());

            if (!display_1422)
                return;

            var Popupdetection = {};
            Popupdetection.getCookie = function (name) {
                var cookie = " " + document.cookie;
                var search = " " + name + "=";
                var setStr = null;
                var offset = 0;
                var end = 0;
                if (cookie.length > 0) {
                    offset = cookie.indexOf(search);
                    if (offset != -1) {
                        offset += search.length;
                        end = cookie.indexOf(";", offset)
                        if (end == -1) {
                            end = cookie.length;
                        }
                        setStr = unescape(cookie.substring(offset, end));
                    }
                }
                return (setStr);
            };

            function containsSophus() {
                if (typeof s3_creativeDisplayed === "undefined" && (typeof s3_creativeDisplayed !== "object" || !s3_creativeDisplayed))
                    return false;
                if (s3_creativeDisplayed)
                    return true;
                return false;
            }


            function getCookieNameContains(nameIncludes) {
                var allCookies = document.cookie;
                if (allCookies.length > 0) {
                    var cookieArray = allCookies.split(';');
                    for (var i = 0; i < cookieArray.length; i++) {
                        var name = cookieArray[i].split('=')[0];
                        if (name.includes(nameIncludes))
                            return true;
                    }
                }
                return false;
            }

            function blockPopup() {

                if (Popupdetection.getCookie("psyma_participation") === "1" && Popupdetection.getCookie("optprg-popups-disable")) {

                    if ($("#psyma_layer").length > 0) {
                        console.log('blocked');
                        return true;
                    }
                }

                if ((getCookieNameContains('IPE') || getCookieNameContains('IPE_M_')) || containsSophus() || compareLastClosed() === false) {
                    console.log('blocked');
                    return true;
                }

                return false;
            }

            if (blockPopup())
                return;


            setTimeout(function () {

                if (!blockPopup()) {
                    OverlayHelpers.openOverlay(ENV.MarketConfiguration.overlay, function (overlay) {

                        if (compareLastClosed() === false) {
                            return false;
                        }
                        OverlayHelpers.fillOverlay(overlay, storedData_1422, initializeCloseHandlers(overlay.$overlayContent));

                        adobe.target.trackEvent({
                            "mbox": MBOXName,
                            "params": {
                                "open": "pop-up-open"
                            }
                        });
                        setCookieForImpressionID(0.25,'/','1422-challenger-fired','true');
                    });

                    let x = setInterval(function () {
                        if (

                            $('.regular.richtext-inner>p:contains("Prices correct as of")') !== undefined
                            && $('.regular.richtext-inner>p:contains("Prices correct as of")').length > 0
                            && $('.regular.richtext-inner>h4') !== undefined
                            && $('.regular.richtext-inner>h4').length > 0
                            && $('.regular.richtext-inner>h5') !== undefined
                            && $('.regular.richtext-inner>h5').length > 0
                            && $('.splitter-column.large-6.columns>div>.image.section>.component-content>picture>source') !== undefined
                            && $('.splitter-column.large-6.columns>div>.image.section>.component-content>picture>source').length > 0

                        ) {
                            fix();
                            clearInterval(x)
                        }

                    }, 125);
                }

            }, ENV.MarketConfiguration.delayBeforeOpenOverlay);





        }());

        $(window).load(function () {

        });
    }
    else if (display_1422 = "NO" == myMarket && "1422" == myTicket && storedData_1422.visited === true && (storedData_1422.carName === undefined || storedData_1422.carName.replace('Ford ', '') === '')) {
        var popupData_1422 = {
            popup_last_closed: Number("${profile.no.osbpopup.popup_last_closed}"),
            popup_display_count: Number("${profile.no.osbpopup.popup_display_count}"),
            osbpopup_abondoned: "${profile.no.osbpopup.abondoned}"
        };
        console.log("popup data", popupData_1422);




        $(document).ready(function () {
            console.log('OT-1422 | OSB Popup');

            var url = window.location.href;
            var popupId = "js-popup-no-osb-abandon";

            function updatepopupData_1422(popup_last_closed, popup_display_count) {
                adobe.target.getOffer({
                    'mbox': 'MBOX-1422',
                    'params': {
                        'profile.no.osbpopup.popup_last_closed': popup_last_closed,
                        'profile.no.osbpopup.popup_display_count': popup_display_count
                    },
                    'success': function (offer) {
                        adobe.target.applyOffer({
                            'mbox': 'MBOX-1422',
                            'offer': offer
                        });
                    },
                    'error': function (status, error) {
                        console.log('Error', status, error);
                    }
                });
            }

            var Popup = {};
            Popup.isPopupOpen = false;
            Popup.showPopupAfter = 900; // IN SECONDS - 900 SECONDS WHICH IS 15 MINUTES
            Popup.openThreshold = 2; // LIMIT THE AMOUNT OF TIMES THE POPUP OPENS
            Popup.currentTimeStamp = Math.floor(Date.now() / 1000);
            Popup.setLastClosed = function () {
                Popup.setKeyValue("popup_last_closed", Math.floor(Date.now() / 1000));
            };
            Popup.determineIfPopupShows = function () {

                console.log("Called determineIfPopupShows");

                var popupCookie = popupData_1422;
                var timeBool = false;
                var limitBool = false;

                // ---------------------------------------------
                // DETERMINE IF 15 MINUTE TIME LIMIT HAS EXPIRED
                // ---------------------------------------------
                var timeDifference = Popup.currentTimeStamp - popupCookie.popup_last_closed;

                if (timeDifference > Popup.showPopupAfter || window.location.href.indexOf("?targetDebug=1422") >= 0) {
                    timeBool = true;
                } else {
                    console.log("SHOW AFTER FAILED");
                    console.log("TIME DIFFERENCE: " + timeDifference + "/" + Popup.showPopupAfter);
                }

                // ---------------------------------------------
                // LIMIT OPEN THRESHOLD
                // ---------------------------------------------
                if (popupCookie.popup_display_count <= Popup.openThreshold && timeBool === true) {

                    if (popupCookie.popup_last_closed != null) {
                        // INCREASE OPEN COUNTER BY 1
                        Popup.setKeyValue("popup_display_count", ++popupCookie.popup_display_count);
                        Popup.setLastClosed();
                    }

                    limitBool = true;
                }
                console.log("TIMEBOOL : " + timeBool);
                console.log("LIMITBOOL: " + limitBool);

                return (timeBool && limitBool);
            };

            Popup.setKeyValue = function (key, value) {

                popupData_1422[key] = value;

                updatepopupData_1422(popupData_1422.popup_last_closed, popupData_1422.popup_display_count)
            };



            // create popup function

            function createPopup() {
                console.log("Called createPopup");
                var translations = {
                    mainHeading: "Fikk du ikke bestilt prøvekjøring? Vil du prøve igjen?",
                    primaryCta: "Prøvekjøring",
                    offer: "",
                    date: "",
                    subHeading: "",
                    primaryCtaUrl: storedData_1422.contextualiseLink,
                    disclaimer: "",
                };

                // Get image of configured Puma (exists on page)
                var carImageUrl =
                    "";

                // Build the popup
                var popupShell = $(
                    '<div class="popup-overlay"  id="' +
                    popupId +
                    '"><div class="popup-dialog"><div class="popup-header"><button class="popup-close">&times;</button></div><div class="popup-body"><img src="' +
                    carImageUrl +
                    '" /><h1 class="heading-medium">' +
                    translations.mainHeading +
                    ' </h1><h2 class="heading-small">' + translations.subHeading +
                    '</h2><a href="' +
                    translations.primaryCtaUrl +
                    '" class="popup-btn" id="js-popup-testdrive">' +
                    translations.primaryCta +
                    "</a><div class='m-small'>" +
                    translations.disclaimer +
                    '</div></div><div style="clear:both;"></div></div></div>'
                );
                $("body").append(popupShell);

                setTimeout(() => {
                    openPopup(popupId);
                }, 4000);

                additionalMatrics();

            }

            //end of createPopup function
            function openPopup(popupId) {
                console.log("Called open popup");
                Scroll = (function () {
                    var x, y;
                    function hndlr() {
                        window.scrollTo(x, y);
                        //return;
                    }
                    return {
                        disable: function (x1, y1) {
                            x = x1;
                            y = y1;
                            if (window.addEventListener) {
                                window.addEventListener("scroll", hndlr);
                            } else {
                                window.attachEvent("onscroll", hndlr);
                            }
                        },
                        enable: function () {
                            if (window.removeEventListener) {
                                window.removeEventListener("scroll", hndlr);
                            } else {
                                window.detachEvent("onscroll", hndlr);
                            }
                        },
                    };
                })();
                Scroll.disable(0, document.body.scrollTop);
                document.getElementById(popupId).classList.add("active");
                document
                    .querySelector(".popup-close")
                    .addEventListener("click", function () {

                        var displayCount = 0;
                        if (JSON.parse(localStorage.getItem('popinState')) !== undefined &&JSON.parse(localStorage.getItem('popinState')) !== null && JSON.parse(localStorage.getItem('popinState')).alert_display_count !== undefined) {
                            displayCount = JSON.parse(localStorage.getItem('popinState')).alert_display_count + 1;
                        } else {
                            displayCount = 1;
                        }
                        storePopinState(Math.floor(Date.now()), displayCount)

                        document.getElementById(popupId).classList.remove("active");

                        Scroll.enable();
                    });

                document.querySelector('.popup-overlay').addEventListener('click', function () {
                    var displayCount = 0;
                    if (JSON.parse(localStorage.getItem('popinState')) !== undefined &&JSON.parse(localStorage.getItem('popinState')) !== null && JSON.parse(localStorage.getItem('popinState')).alert_display_count !== undefined) {
                        displayCount = JSON.parse(localStorage.getItem('popinState')).alert_display_count + 1;
                    } else {
                        displayCount = 1;
                    }
                    storePopinState(Math.floor(Date.now()), displayCount)
                    document.getElementById(popupId).classList.remove("active");
                    Scroll.enable();
                })
            }

            function closePopup() {
                console.log('called close popup');
                var displayCount = 0;
                if (JSON.parse(localStorage.getItem('popinState')) !== undefined &&JSON.parse(localStorage.getItem('popinState')) !== null && JSON.parse(localStorage.getItem('popinState')).alert_display_count !== undefined) {
                    displayCount = JSON.parse(localStorage.getItem('popinState')).alert_display_count + 1;
                } else {
                    displayCount = 1;
                }
                storePopinState(Math.floor(Date.now()), displayCount)
                document.getElementById(popupId).classList.remove("active");
            }

            function additionalMatrics() {
                console.log("Called additionalMatrics");
                document.querySelector("#js-popup-testdrive").addEventListener("click", function (ev) {
                    adobe.target.trackEvent({
                        "mbox": "MBOX-1422",
                        "params": {
                            "linkClicked": "true"
                        }
                    });

                })
            }

            function displaypopup() {
                console.log("called displayPopup");
                setTimeout(() => {
                    if (!popupData_1422) {
                        updatepopupData_1422(0, 1);
                        Popup.setLastClosed();
                        createPopup();
                    } else {
                        if (Popup.determineIfPopupShows()) {
                            createPopup();
                        }
                    }
                }, 2000)
            }
            displaypopup();
        });


    }



</script>
<style>
    .popup-overlay {
        position: fixed;
        top: -100%;
        left: 0;
        right: 0;
        bottom: 0;
        width: 100%;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.4);
        z-index: 9999;
        opacity: 0;
        transition: opacity 0.25s ease;
    }

    .popup-overlay.active {
        top: 0;
        opacity: 1;
    }

    .popup-dialog {
        position: absolute;
        height: auto;
        width: 320px;
        top: 50%;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
        background-color: white;
    }

    @media screen and (min-width: 768px) {
        .popup-dialog {
            height: auto;
            width: 500px;
        }
    }

    .popup-header {
        width: 100%;
        text-align: right;
    }

    .popup-close {
        appearance: none;
        border: none;
        box-shadow: none;
        font-size: 50px;
        line-height: 30px;
        padding: 0;
        color: #102a4d;
        background-color: transparent;
        margin: 8px 0 0 0;
        font-weight: 200;
    }

    .popup-body {
        width: 100%;
        text-align: center;
    }

    .popup-body h1,
    .popup-body h2,
    .popup-body p {
        padding: 0 20px;
    }

    .popup-body img {
        display: block;
        width: 100%;
        padding-bottom: 20px;
    }

    .popup-body h1 {
        font-family: FordAntennaCondLight, Arial, Helvetica, sans-serif;
        color: rgb(77, 77, 77);
        line-height: 1.15;
        font-size: 1.6rem;
        font-weight: bold;
    }

    .popup-btn {
        display: block;
        padding: 8px 20px;
        background-color: #102a4d;
        text-decoration: none;
        color: white !important;
        box-shadow: rgba(0, 0, 0, 0.1) 0px 10px 10px 0px,
            rgba(0, 0, 0, 0.1) 0px 20px 20px 0px;
        border-radius: 20px;
        font-size: 1.125rem;
        cursor: pointer;
        font-family: FordAntennaCondRegular, Arial, Helvetica, sans-serif;
        width: 100%;
        margin: 10px auto;
        max-width: 250px;
        margin-top: 30px;
        text-decoration: none !important;
    }

    .popup-btn:hover {
        color: white !important;
    }

    .heading-small {
        font-size: 1.0rem;
        margin-bottom: 0.2rem;
        color: black;
        margin-top: 21px;
        margin-bottom: -10px;
    }

    .heading-medium {
        font-size: 1.2rem !important;
    }

    .m-small {
        padding: 20px;
        font-size: 0.8rem;
    }

    .voucher-code {
        font-family: FordAntennaCondLight, Arial, Helvetica, sans-serif;
        color: rgb(77, 77, 77);
        line-height: 1.15;
        font-size: 1.4rem;
        font-weight: bold;
        margin-bottom: 0;
        padding: 0;
    }



    /*

        ------------------------
        |       NOTE           |
        ------------------------
        These aren't currently in the build
        adding the styling here so when it is added
        we can get the css here.

        UPE $48,500 Retail Price
        Desktop/Tablet:

        font-family: FordAntennaRegular;
        font-size: 16px;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        line-height:1.63;
        letter-spacing: 1px;
        color: #4d4d4d;

        Disclaimer text below button
        Desktop/Tablet:

        width: 428px;
        height: 63px;
        font-family: FordAntennaRegular;
        font-size: 12px;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        line-height: 1.75;
        letter-spacing: 1px;
        color: #4d4d4d;

    */
    @media only screen and (min-width: 992px) {
        #global-ux .overlay-content.optprg-tdr-pop-up-1422-content {
            max-width: 1035px;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .splitter-column-wrap>.splitter-column:last-child {
            padding-left: 55px !important;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .image.section {
            width: 393px;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-tdr-pop-up-heading {
            font-size: 34px;
            font-weight: 300 !important;
            line-height: 1.29 !important;
            letter-spacing: 4px;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-carname {
            letter-spacing: 3px;
            font-size: 24px !important;
            line-height: 1.42 !important;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-subname {
            font-size: 24px !important;
        }

        #global-ux .optprg-tdr-pop-up-1422-content #id-optprg-main-price-label {
            display: block !important;
            font-size: 16px;
            line-height: 1.63;
            letter-spacing: 1px;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-primary-button {
            height: 40px;
            font-size: 14px !important;
            line-height: 0.72;
            letter-spacing: 1px;
            padding: 13px 25px 13px 25px !important;
        }
    }

    #global-ux .optprg-tdr-pop-up-1422-content .icon-x,
    #optprg-tdr-pop-up-price-tooltip .close-icon:before {
        color: #102b4e !important;
    }

    #optprg-tdr-pop-up-price-tooltip .gux-tooltip-overlay-title {
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        margin: 0px;
        font-weight: 300;
        font-size: 1.125rem;
        line-height: 1.39;
        letter-spacing: 4px;
        color: #4d4d4d;
    }

    #optprg-tdr-pop-up-price-tooltip .gux-tooltip-overlay-text {
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        font-weight: 200;
        font-size: 18px;
        line-height: 1.333;
        letter-spacing: .015em;
        margin: 0px;
    }

    #optprg-tdr-pop-up-price-tooltip .gux-tooltip-overlay-text>span {
        color: #4d4d4d !important;
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-tdr-pop-up-heading {
        text-align: center;
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        font-stretch: normal;
        font-style: normal;
        color: #4d4d4d !important;
    }

    #global-ux #id-optprg-main-price-label {
        display: block !important;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        color: #4d4d4d;
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-info,
    #global-ux .optprg-tdr-pop-up-1422-content .optprg-co2-info,
    #global-ux .optprg-tdr-pop-up-1422-content .optprg-price-info {
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        font-weight: normal !important;
        font-stretch: normal;
        font-style: normal;
        letter-spacing: 1px;
        color: #4d4d4d !important;
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-sup {
        font-size: 50%;
        top: -1em;
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-a {
        text-decoration: unset;
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        left: auto;
        vertical-align: super;
        font-size: 0.5625rem;
        cursor: pointer;
        background: none;
        border-width: initial;
        border-style: none;
        border-color: initial;
        border-image: initial;
        margin-top: 10px;
        color: #4d4d4d;
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-main-price-value {
        font-weight: 500;
        font-stretch: normal;
        font-style: normal;
        color: #4d4d4d;
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;

        font-size: 24px !important;
        line-height: 1.42;
        letter-spacing: 3px;
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-primary-button {
        border-radius: 20px;
        color: #FFF !important;
        background-color: #102b4e !important;
        border-color: unset !important;
        font-weight: normal !important;
        font-stretch: normal;
        font-style: normal;
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        margin-bottom: 19px !important;
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-primary-button:hover {
        background-color: rgb(40, 97, 164) !important;
        color: rgb(255, 255, 255) !important;
        box-shadow: rgba(0, 0, 0, 0.1) 0px 10px 10px 0px, rgba(0, 0, 0, 0.1) 0px 20px 20px 0px, rgba(0, 0, 0, 0.15) 0px 30px 30px 0px !important;
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-carname {
        font-family: FordAntennaCondLight, AntennaCondExtraLight, Antenna, Arial, Helvetica, sans-serif !important;
        font-weight: bold !important;
        font-stretch: normal;
        font-style: normal;
        color: #4d4d4d !important;
    }

    #global-ux .optprg-tdr-pop-up-1422-content p.hors-taxe {
        font-size: 12px;
    }

    #global-ux .optprg-tdr-pop-up-1422-content .cta-button.cta-button-primary {
        margin-bottom: 2rem;
        font-size: .9rem
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-vehicle-attribute-prefix,
    #global-ux .optprg-tdr-pop-up-1422-content .optprg-vehicle-attribute-suffix {
        font-size: 1.8rem;
        font-weight: 200
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-info,
    #global-ux .optprg-tdr-pop-up-1422-content .optprg-co2-info,
    #global-ux .optprg-tdr-pop-up-1422-content .optprg-price-info {
        font-size: 12px !important;
        margin: 0 !important;
        padding: 0 !important
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-tdr-pop-up-price,
    #global-ux .optprg-tdr-pop-up-1422-content .optprg-retail-price-box {
        font-size: 1.8rem !important;
        padding: 0 !important;
        margin: 0 !important;
        border: none !important
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-tdr-pop-up-price span,
    #global-ux .optprg-tdr-pop-up-1422-content .optprg-retail-price-box span {
        font-size: 1.8rem;
        /* font-size: 1.8rem !important */
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-retail-price-box.optprg-include-offer {
        margin-top: -12px !important;
        font-weight: normal !important;
        font-stretch: normal !important;
        font-style: normal !important;
        color: #4d4d4d !important;

        font-size: 16px !important;
        line-height: 1.63;
        letter-spacing: 1px;
    }

    #global-ux .optprg-tdr-pop-up-1422-content .optprg-retail-price-box.optprg-include-offer span {
        font-size: .75rem !important;
        font-weight: 300 !important;
        letter-spacing: 1px !important;
    }

    #global-ux .optprg-tdr-pop-up-1422-content p.optprg-main-price-label {
        font-size: .75rem;
        display: block;
        padding: 0;
        margin: 0
    }

    /* TABLET */
    @media only screen and (min-width:48em) and (max-width:61.9375em) {
        #global-ux .optprg-tdr-pop-up-1422-content {
            top: 400px !important
        }

        #global-ux .overlay-content.optprg-tdr-pop-up-1422-content {
            max-width: 537px;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-tdr-pop-up-heading {
            font-size: 24px;
            font-weight: 300 !important;
            line-height: 1.42 !important;
            letter-spacing: 3px;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-tdr-pop-up-heading br {
            display: none
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-carname {
            letter-spacing: 3px;
            font-size: 24px !important;
            line-height: 1.42 !important;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-subname {
            font-size: 24px !important;
        }

        #global-ux .optprg-tdr-pop-up-1422-content #id-optprg-main-price-label {
            display: block !important;
            font-size: 16px;
            line-height: 1.63;
            letter-spacing: 1px;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-primary-button {
            height: 40px;
            font-size: 14px !important;
            line-height: 0.72;
            letter-spacing: 1px;
            padding: 13px 25px 13px 25px !important;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .splitter-column-wrap {
            display: block;
            text-align-last: center;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .splitter-column-wrap .splitter-column.large-6.columns {
            display: block;
            float: none;
            padding: 0;
            width: auto
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-tdr-pop-up-image {
            width: 60%
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-car-name span {
            display: block
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-car-name .optprg-car-name-sub-name {
            margin-top: -6px !important
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-info,
        #global-ux .optprg-tdr-pop-up-1422-content .optprg-co2-info,
        #global-ux .optprg-tdr-pop-up-1422-content .optprg-price-info {
            font-size: 12px !important;
            margin: 0 !important;
            padding: 0 !important
        }
    }

    /* MOBILE */

    @media only screen and (max-width:30em),
    only screen and (min-width:30.0625em) and (max-width:47.9375em) {
        #global-ux .optprg-tdr-pop-up-1422-content .splitter-column-wrap {
            display: block;
            text-align-last: center;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-tdr-pop-up-heading {
            font-size: 20px;
            font-weight: 300 !important;
            line-height: 1.5 !important;
            letter-spacing: 3px;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-primary-button {
            height: 40px;
            font-size: 14px !important;
            line-height: 0.72;
            letter-spacing: 1px;
            padding: 13px 25px 13px 25px !important;
        }

        #global-ux .optprg-tdr-pop-up-1422-content #id-optprg-main-price-label {
            display: block !important;
            font-size: 16px;
            line-height: 1.63;
            letter-spacing: 1px;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-carname {
            letter-spacing: 3px;
            font-size: 20px !important;
            line-height: 1.5 !important;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-subname {
            font-size: 20px !important;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .splitter-column-wrap .splitter-column.large-6.columns {
            display: block;
            float: none;
            padding: 0;
            width: auto
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-info,
        #global-ux .optprg-tdr-pop-up-1422-content .optprg-co2-info,
        #global-ux .optprg-tdr-pop-up-1422-content .optprg-price-info {
            margin: 0 -15px !important
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-car-name {
            line-height: 2rem !important
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-car-name span {
            display: block
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-car-name .optprg-car-name-sub-name {
            margin-top: -6px !important;
            margin-bottom: 15px !important
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-tdr-pop-up-heading {
            font-weight: 300 !important;
            font-size: 1.5rem;
            line-height: 1.5rem !important;
            margin-top: 16px !important;
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-tdr-pop-up-price {
            margin-top: -10px !important
        }

        #global-ux .optprg-tdr-pop-up-1422-content .optprg-main-price-label {
            margin-bottom: 12px !important
        }
    }

    @media only screen and (max-width:47.9375em) {
        #global-ux #optprg-tdr-pop-up-price-tooltip {
            top: 0 !important;
            left: 0 !important;
            height: 100%;
            width: 100%
        }
    }

    .optprg-carname {
        text-transform: capitalize !important;
    }
</style>